{"_path":"/misc/using-events","_dir":"misc","_draft":false,"_partial":false,"_locale":"","_empty":false,"title":"Using Fabric API Events","description":"Learn how to use Fabric API's event system.","body":{"type":"root","children":[{"type":"element","tag":"h1","props":{"id":"using-fabric-api-events"},"children":[{"type":"text","value":"Using Fabric API Events"}]},{"type":"element","tag":"p","props":{},"children":[{"type":"text","value":"Fabric API contains "},{"type":"element","tag":"strong","props":{},"children":[{"type":"text","value":"many"}]},{"type":"text","value":" events that you can use instead of creating mixins - if everyone made the same mixin, to do the same task, it would get messy."}]},{"type":"element","tag":"p","props":{},"children":[{"type":"text","value":"You can simply "},{"type":"element","tag":"a","props":{"href":"https://github.com/search?q=repo%3AFabricMC%2Ffabric%20Events&type=code","rel":["nofollow"]},"children":[{"type":"text","value":"search for events"}]},{"type":"text","value":" on the Fabric API GitHub repository to find an event that suits your usage."}]},{"type":"element","tag":"p","props":{},"children":[{"type":"text","value":"In this page, you'll utilize the "},{"type":"element","tag":"code-inline","props":{},"children":[{"type":"text","value":"AttackEntityCallback"}]},{"type":"text","value":" to send sound effects into the chat (POW! BANG! SNAP!) when the player attacks."}]},{"type":"element","tag":"h2","props":{"id":"registering-a-listener"},"children":[{"type":"text","value":"Registering a listener."}]},{"type":"element","tag":"p","props":{},"children":[{"type":"text","value":"Registering listeners are the easy part! Simply use the "},{"type":"element","tag":"code-inline","props":{},"children":[{"type":"text","value":"register(listener)"}]},{"type":"text","value":" method on the event and either pass a method reference or a lambda function."}]},{"type":"element","tag":"code","props":{"code":"AttackEntityCallback.EVENT.register((player, world, hand, entity, hitResult) -> {\n            ...\n});\n","language":"java","meta":null},"children":[{"type":"element","tag":"pre","props":{},"children":[{"type":"element","tag":"code","props":{"__ignoreMap":""},"children":[{"type":"element","tag":"span","props":{"class":"line","line":1},"children":[{"type":"element","tag":"span","props":{"class":"ct-8e3707"},"children":[{"type":"text","value":"AttackEntityCallback.EVENT."}]},{"type":"element","tag":"span","props":{"class":"ct-bbf837"},"children":[{"type":"text","value":"register"}]},{"type":"element","tag":"span","props":{"class":"ct-8e3707"},"children":[{"type":"text","value":"((player, world, hand, entity, hitResult) "}]},{"type":"element","tag":"span","props":{"class":"ct-da0e21"},"children":[{"type":"text","value":"->"}]},{"type":"element","tag":"span","props":{"class":"ct-8e3707"},"children":[{"type":"text","value":" {\n"}]}]},{"type":"element","tag":"span","props":{"class":"line","line":2},"children":[{"type":"element","tag":"span","props":{"class":"ct-8e3707"},"children":[{"type":"text","value":"            ...\n"}]}]},{"type":"element","tag":"span","props":{"class":"line","line":3},"children":[{"type":"element","tag":"span","props":{"class":"ct-8e3707"},"children":[{"type":"text","value":"});"}]}]}]}]}]},{"type":"element","tag":"h2","props":{"id":"utilizing-event-data"},"children":[{"type":"text","value":"Utilizing event data."}]},{"type":"element","tag":"p","props":{},"children":[{"type":"text","value":"Different events will provide different data - some even ask for data back, such as an integer or boolean."}]},{"type":"element","tag":"p","props":{},"children":[{"type":"text","value":"In the case of our example, the event requires an "},{"type":"element","tag":"code-inline","props":{},"children":[{"type":"text","value":"ActionResult"}]},{"type":"text","value":", the javadoc states the following "},{"type":"element","tag":"code-inline","props":{},"children":[{"type":"text","value":"ActionResult"}]},{"type":"text","value":" types can be used:"}]},{"type":"element","tag":"table","props":{},"children":[{"type":"element","tag":"thead","props":{},"children":[{"type":"element","tag":"tr","props":{},"children":[{"type":"element","tag":"th","props":{"align":null},"children":[{"type":"text","value":"Type"}]},{"type":"element","tag":"th","props":{"align":null},"children":[{"type":"text","value":"Affect"}]}]}]},{"type":"element","tag":"tbody","props":{},"children":[{"type":"element","tag":"tr","props":{},"children":[{"type":"element","tag":"td","props":{"align":null},"children":[{"type":"element","tag":"code-inline","props":{},"children":[{"type":"text","value":"ActionResult.SUCCESS"}]}]},{"type":"element","tag":"td","props":{"align":null},"children":[{"type":"text","value":"Cancels all other listeners, cancels the attack as well."}]}]},{"type":"element","tag":"tr","props":{},"children":[{"type":"element","tag":"td","props":{"align":null},"children":[{"type":"element","tag":"code-inline","props":{},"children":[{"type":"text","value":"ActionResult.PASS"}]}]},{"type":"element","tag":"td","props":{"align":null},"children":[{"type":"text","value":"Do not do anything else."}]}]},{"type":"element","tag":"tr","props":{},"children":[{"type":"element","tag":"td","props":{"align":null},"children":[{"type":"element","tag":"code-inline","props":{},"children":[{"type":"text","value":"ActionResult.FAIL"}]}]},{"type":"element","tag":"td","props":{"align":null},"children":[{"type":"text","value":"Cancel all other listeners, but don't cancel the attack."}]}]}]}]},{"type":"element","tag":"p","props":{},"children":[{"type":"text","value":"Since we don't actually care why the player is attacking, we'll simply return a pass result."}]},{"type":"element","tag":"code","props":{"code":"AttackEntityCallback.EVENT.register((player, world, hand, entity, hitResult) -> {\n    return ActionResult.PASS;\n});\n","language":"java","meta":null},"children":[{"type":"element","tag":"pre","props":{},"children":[{"type":"element","tag":"code","props":{"__ignoreMap":""},"children":[{"type":"element","tag":"span","props":{"class":"line","line":1},"children":[{"type":"element","tag":"span","props":{"class":"ct-8e3707"},"children":[{"type":"text","value":"AttackEntityCallback.EVENT."}]},{"type":"element","tag":"span","props":{"class":"ct-bbf837"},"children":[{"type":"text","value":"register"}]},{"type":"element","tag":"span","props":{"class":"ct-8e3707"},"children":[{"type":"text","value":"((player, world, hand, entity, hitResult) "}]},{"type":"element","tag":"span","props":{"class":"ct-da0e21"},"children":[{"type":"text","value":"->"}]},{"type":"element","tag":"span","props":{"class":"ct-8e3707"},"children":[{"type":"text","value":" {\n"}]}]},{"type":"element","tag":"span","props":{"class":"line","line":2},"children":[{"type":"element","tag":"span","props":{"class":"ct-8e3707"},"children":[{"type":"text","value":"    "}]},{"type":"element","tag":"span","props":{"class":"ct-da0e21"},"children":[{"type":"text","value":"return"}]},{"type":"element","tag":"span","props":{"class":"ct-8e3707"},"children":[{"type":"text","value":" ActionResult.PASS;\n"}]}]},{"type":"element","tag":"span","props":{"class":"line","line":3},"children":[{"type":"element","tag":"span","props":{"class":"ct-8e3707"},"children":[{"type":"text","value":"});"}]}]}]}]}]},{"type":"element","tag":"p","props":{},"children":[{"type":"text","value":"We also need to take note of the name of the player, and the name of the entity they are attacking:"}]},{"type":"element","tag":"code","props":{"code":"var playerName = player.getDisplayName().copy();\nvar entityName = entity.getDisplayName().copy();\n","language":"java","meta":null},"children":[{"type":"element","tag":"pre","props":{},"children":[{"type":"element","tag":"code","props":{"__ignoreMap":""},"children":[{"type":"element","tag":"span","props":{"class":"line","line":1},"children":[{"type":"element","tag":"span","props":{"class":"ct-da0e21"},"children":[{"type":"text","value":"var"}]},{"type":"element","tag":"span","props":{"class":"ct-de387d"},"children":[{"type":"text","value":" "}]},{"type":"element","tag":"span","props":{"class":"ct-8e3707"},"children":[{"type":"text","value":"playerName"}]},{"type":"element","tag":"span","props":{"class":"ct-de387d"},"children":[{"type":"text","value":" "}]},{"type":"element","tag":"span","props":{"class":"ct-da0e21"},"children":[{"type":"text","value":"="}]},{"type":"element","tag":"span","props":{"class":"ct-8e3707"},"children":[{"type":"text","value":" player."}]},{"type":"element","tag":"span","props":{"class":"ct-bbf837"},"children":[{"type":"text","value":"getDisplayName"}]},{"type":"element","tag":"span","props":{"class":"ct-8e3707"},"children":[{"type":"text","value":"()."}]},{"type":"element","tag":"span","props":{"class":"ct-bbf837"},"children":[{"type":"text","value":"copy"}]},{"type":"element","tag":"span","props":{"class":"ct-8e3707"},"children":[{"type":"text","value":"();\n"}]}]},{"type":"element","tag":"span","props":{"class":"line","line":2},"children":[{"type":"element","tag":"span","props":{"class":"ct-da0e21"},"children":[{"type":"text","value":"var"}]},{"type":"element","tag":"span","props":{"class":"ct-de387d"},"children":[{"type":"text","value":" "}]},{"type":"element","tag":"span","props":{"class":"ct-8e3707"},"children":[{"type":"text","value":"entityName"}]},{"type":"element","tag":"span","props":{"class":"ct-de387d"},"children":[{"type":"text","value":" "}]},{"type":"element","tag":"span","props":{"class":"ct-da0e21"},"children":[{"type":"text","value":"="}]},{"type":"element","tag":"span","props":{"class":"ct-8e3707"},"children":[{"type":"text","value":" entity."}]},{"type":"element","tag":"span","props":{"class":"ct-bbf837"},"children":[{"type":"text","value":"getDisplayName"}]},{"type":"element","tag":"span","props":{"class":"ct-8e3707"},"children":[{"type":"text","value":"()."}]},{"type":"element","tag":"span","props":{"class":"ct-bbf837"},"children":[{"type":"text","value":"copy"}]},{"type":"element","tag":"span","props":{"class":"ct-8e3707"},"children":[{"type":"text","value":"();"}]}]}]}]}]},{"type":"element","tag":"p","props":{},"children":[{"type":"text","value":"Finally, we can send the sound effect text into the chat:"}]},{"type":"element","tag":"code","props":{"code":"MinecraftClient client = MinecraftClient.getInstance();\nChatHud chat = client.inGameHud.getChatHud();\n\nchat.addMessage(Text.of(\"SNAP!!!!\"));\nchat.addMessage(playerName.append(\" attacked \").append(entityName));\n","language":"java","meta":null},"children":[{"type":"element","tag":"pre","props":{},"children":[{"type":"element","tag":"code","props":{"__ignoreMap":""},"children":[{"type":"element","tag":"span","props":{"class":"line","line":1},"children":[{"type":"element","tag":"span","props":{"class":"ct-8e3707"},"children":[{"type":"text","value":"MinecraftClient"}]},{"type":"element","tag":"span","props":{"class":"ct-de387d"},"children":[{"type":"text","value":" "}]},{"type":"element","tag":"span","props":{"class":"ct-8e3707"},"children":[{"type":"text","value":"client"}]},{"type":"element","tag":"span","props":{"class":"ct-de387d"},"children":[{"type":"text","value":" "}]},{"type":"element","tag":"span","props":{"class":"ct-da0e21"},"children":[{"type":"text","value":"="}]},{"type":"element","tag":"span","props":{"class":"ct-8e3707"},"children":[{"type":"text","value":" MinecraftClient."}]},{"type":"element","tag":"span","props":{"class":"ct-bbf837"},"children":[{"type":"text","value":"getInstance"}]},{"type":"element","tag":"span","props":{"class":"ct-8e3707"},"children":[{"type":"text","value":"();\n"}]}]},{"type":"element","tag":"span","props":{"class":"line","line":2},"children":[{"type":"element","tag":"span","props":{"class":"ct-8e3707"},"children":[{"type":"text","value":"ChatHud"}]},{"type":"element","tag":"span","props":{"class":"ct-de387d"},"children":[{"type":"text","value":" "}]},{"type":"element","tag":"span","props":{"class":"ct-8e3707"},"children":[{"type":"text","value":"chat"}]},{"type":"element","tag":"span","props":{"class":"ct-de387d"},"children":[{"type":"text","value":" "}]},{"type":"element","tag":"span","props":{"class":"ct-da0e21"},"children":[{"type":"text","value":"="}]},{"type":"element","tag":"span","props":{"class":"ct-8e3707"},"children":[{"type":"text","value":" client.inGameHud."}]},{"type":"element","tag":"span","props":{"class":"ct-bbf837"},"children":[{"type":"text","value":"getChatHud"}]},{"type":"element","tag":"span","props":{"class":"ct-8e3707"},"children":[{"type":"text","value":"();\n"}]}]},{"type":"element","tag":"span","props":{"class":"line","line":3},"children":[{"type":"element","tag":"span","props":{},"children":[{"type":"text","value":"\n"}]}]},{"type":"element","tag":"span","props":{"class":"line","line":4},"children":[{"type":"element","tag":"span","props":{"class":"ct-8e3707"},"children":[{"type":"text","value":"chat."}]},{"type":"element","tag":"span","props":{"class":"ct-bbf837"},"children":[{"type":"text","value":"addMessage"}]},{"type":"element","tag":"span","props":{"class":"ct-8e3707"},"children":[{"type":"text","value":"(Text."}]},{"type":"element","tag":"span","props":{"class":"ct-bbf837"},"children":[{"type":"text","value":"of"}]},{"type":"element","tag":"span","props":{"class":"ct-8e3707"},"children":[{"type":"text","value":"("}]},{"type":"element","tag":"span","props":{"class":"ct-188062"},"children":[{"type":"text","value":"\"SNAP!!!!\""}]},{"type":"element","tag":"span","props":{"class":"ct-8e3707"},"children":[{"type":"text","value":"));\n"}]}]},{"type":"element","tag":"span","props":{"class":"line","line":5},"children":[{"type":"element","tag":"span","props":{"class":"ct-8e3707"},"children":[{"type":"text","value":"chat."}]},{"type":"element","tag":"span","props":{"class":"ct-bbf837"},"children":[{"type":"text","value":"addMessage"}]},{"type":"element","tag":"span","props":{"class":"ct-8e3707"},"children":[{"type":"text","value":"(playerName."}]},{"type":"element","tag":"span","props":{"class":"ct-bbf837"},"children":[{"type":"text","value":"append"}]},{"type":"element","tag":"span","props":{"class":"ct-8e3707"},"children":[{"type":"text","value":"("}]},{"type":"element","tag":"span","props":{"class":"ct-188062"},"children":[{"type":"text","value":"\" attacked \""}]},{"type":"element","tag":"span","props":{"class":"ct-8e3707"},"children":[{"type":"text","value":")."}]},{"type":"element","tag":"span","props":{"class":"ct-bbf837"},"children":[{"type":"text","value":"append"}]},{"type":"element","tag":"span","props":{"class":"ct-8e3707"},"children":[{"type":"text","value":"(entityName));"}]}]}]}]}]},{"type":"element","tag":"p","props":{},"children":[{"type":"text","value":"Some events may be client-only, or server-only - please be careful when using those events that you're not using server or client specific methods."}]},{"type":"element","tag":"h2","props":{"id":"event-phases"},"children":[{"type":"text","value":"Event Phases"}]},{"type":"element","tag":"p","props":{},"children":[{"type":"text","value":"Some events may have different phases - these phases are ran in a certain order depending on their "},{"type":"element","tag":"strong","props":{},"children":[{"type":"text","value":"priority"}]},{"type":"text","value":"."}]},{"type":"element","tag":"p","props":{},"children":[{"type":"text","value":"If you want to run your listener last, you register it to a later phase. If you want to run it first, register it to a earlier phase."}]},{"type":"element","tag":"p","props":{},"children":[{"type":"text","value":"Different phases might provide different data. For example, the final phase of the resource events do not let you modify the resource pack, because you are too late!"}]},{"type":"element","tag":"h2","props":{"id":"next-steps"},"children":[{"type":"text","value":"Next Steps"}]},{"type":"element","tag":"p","props":{},"children":[{"type":"text","value":"This page is relatively short, mostly because it isn't a complex topic."}]},{"type":"element","tag":"p","props":{},"children":[{"type":"text","value":"If you're interested in creating your own events - specifically for mod compatability or for library usage, you should see the "},{"type":"element","tag":"a","props":{"href":"/events/creation"},"children":[{"type":"text","value":"Creating Your Own Events"}]},{"type":"text","value":" page."}]},{"type":"element","tag":"ul","props":{},"children":[{"type":"element","tag":"li","props":{},"children":[{"type":"text","value":"Why don't you make it so an actual sound plays when the player attacks something, instead of putting it in the chat?"}]},{"type":"element","tag":"li","props":{},"children":[{"type":"text","value":"Can you use events to make it so the player drops a random item out of their inventory when they recieve damage?"}]},{"type":"element","tag":"li","props":{},"children":[{"type":"text","value":"Try implement the example without events using mixins, see why it's so annoying and difficult!"}]}]},{"type":"element","tag":"style","children":[{"type":"text","value":".ct-188062{color:#0A3069}\n.ct-de387d{color:#953800}\n.ct-da0e21{color:#CF222E}\n.ct-bbf837{color:#8250DF}\n.ct-8e3707{color:#24292F}\n.dark .ct-8e3707{color:#C9D1D9}\n.dark .ct-bbf837{color:#D2A8FF}\n.dark .ct-da0e21{color:#FF7B72}\n.dark .ct-de387d{color:#FFA657}\n.dark .ct-188062{color:#A5D6FF}"}]}],"toc":{"title":"","searchDepth":2,"depth":2,"links":[{"id":"registering-a-listener","depth":2,"text":"Registering a listener."},{"id":"utilizing-event-data","depth":2,"text":"Utilizing event data."},{"id":"event-phases","depth":2,"text":"Event Phases"},{"id":"next-steps","depth":2,"text":"Next Steps"}]}},"_type":"markdown","_id":"content:9.misc:using-events.md","_source":"content","_file":"9.misc/using-events.md","_extension":"md"}