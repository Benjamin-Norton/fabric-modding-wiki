{"_path":"/introduction/mixins/mixin_applications","_dir":"mixins","_draft":false,"_partial":false,"_locale":"","_empty":false,"title":"Mixin Applications","description":"What exactly can you do with mixins?","body":{"type":"root","children":[{"type":"element","tag":"h1","props":{"id":"mixin-applications"},"children":[{"type":"text","value":"Mixin Applications"}]},{"type":"element","tag":"p","props":{},"children":[{"type":"text","value":"Mixins can do a lot more than simply injecting code. A few more use cases are listed here."}]},{"type":"element","tag":"p","props":{},"children":[{"type":"text","value":"See also LlamaLad7's great addition to Mixins, "},{"type":"element","tag":"a","props":{"href":"https://github.com/LlamaLad7/MixinExtras","rel":["nofollow"]},"children":[{"type":"text","value":"MixinExtras"}]},{"type":"text","value":", for annotations like "},{"type":"element","tag":"code-inline","props":{},"children":[{"type":"text","value":"@WrapWithCondition"}]},{"type":"text","value":"."}]},{"type":"element","tag":"h2","props":{"id":"accessing-fields-and-methods-from-your-target-class"},"children":[{"type":"text","value":"Accessing fields and methods from your target class"}]},{"type":"element","tag":"p","props":{},"children":[{"type":"text","value":"You often need to use fields and methods from your target class. This is possible in two ways:"}]},{"type":"element","tag":"ul","props":{},"children":[{"type":"element","tag":"li","props":{},"children":[{"type":"element","tag":"a","props":{"href":"#the-shadow-annotation"},"children":[{"type":"text","value":"The @Shadow annotation"}]}]},{"type":"element","tag":"li","props":{},"children":[{"type":"element","tag":"a","props":{"href":"#casting-this"},"children":[{"type":"text","value":"Casting this"}]}]}]},{"type":"element","tag":"p","props":{},"children":[{"type":"element","tag":"code-inline","props":{},"children":[{"type":"text","value":"@Shadow"}]},{"type":"text","value":" is preferable as it allows for compile-time type safety and doesn't need casts."}]},{"type":"element","tag":"p","props":{},"children":[{"type":"text","value":"For the examples we will use a property of the "},{"type":"element","tag":"code-inline","props":{},"children":[{"type":"text","value":"MinecraftServer"}]},{"type":"text","value":" class:"}]},{"type":"element","tag":"code","props":{"code":"public class MinecraftServer {\n    public final long[] tickTimes;\n}\n","language":"java","meta":null},"children":[{"type":"element","tag":"pre","props":{},"children":[{"type":"element","tag":"code","props":{"__ignoreMap":""},"children":[{"type":"element","tag":"span","props":{"class":"line","line":1},"children":[{"type":"element","tag":"span","props":{"class":"ct-c756ee"},"children":[{"type":"text","value":"public"}]},{"type":"element","tag":"span","props":{"class":"ct-025bde"},"children":[{"type":"text","value":" "}]},{"type":"element","tag":"span","props":{"class":"ct-c756ee"},"children":[{"type":"text","value":"class"}]},{"type":"element","tag":"span","props":{"class":"ct-025bde"},"children":[{"type":"text","value":" "}]},{"type":"element","tag":"span","props":{"class":"ct-a7a2aa"},"children":[{"type":"text","value":"MinecraftServer"}]},{"type":"element","tag":"span","props":{"class":"ct-025bde"},"children":[{"type":"text","value":" {\n"}]}]},{"type":"element","tag":"span","props":{"class":"line","line":2},"children":[{"type":"element","tag":"span","props":{"class":"ct-025bde"},"children":[{"type":"text","value":"    "}]},{"type":"element","tag":"span","props":{"class":"ct-c756ee"},"children":[{"type":"text","value":"public"}]},{"type":"element","tag":"span","props":{"class":"ct-025bde"},"children":[{"type":"text","value":" "}]},{"type":"element","tag":"span","props":{"class":"ct-c756ee"},"children":[{"type":"text","value":"final"}]},{"type":"element","tag":"span","props":{"class":"ct-025bde"},"children":[{"type":"text","value":" "}]},{"type":"element","tag":"span","props":{"class":"ct-c756ee"},"children":[{"type":"text","value":"long"}]},{"type":"element","tag":"span","props":{"class":"ct-a7a2aa"},"children":[{"type":"text","value":"[] "}]},{"type":"element","tag":"span","props":{"class":"ct-025bde"},"children":[{"type":"text","value":"tickTimes;\n"}]}]},{"type":"element","tag":"span","props":{"class":"line","line":3},"children":[{"type":"element","tag":"span","props":{"class":"ct-025bde"},"children":[{"type":"text","value":"}"}]}]}]}]}]},{"type":"element","tag":"h3","props":{"id":"the-shadow-annotation"},"children":[{"type":"text","value":"The "},{"type":"element","tag":"code-inline","props":{},"children":[{"type":"text","value":"@Shadow"}]},{"type":"text","value":" annotation"}]},{"type":"element","tag":"p","props":{},"children":[{"type":"text","value":"The "},{"type":"element","tag":"code-inline","props":{},"children":[{"type":"text","value":"@Shadow"}]},{"type":"text","value":" annotation allows you to use fields and methods from your target class in the mixin. You simply declare the field in your\nmixin class. "},{"type":"element","tag":"code-inline","props":{},"children":[{"type":"text","value":"final"}]},{"type":"text","value":" becomes "},{"type":"element","tag":"code-inline","props":{},"children":[{"type":"text","value":"@Final"}]},{"type":"text","value":" so you don't have to initialize the field, which would cause errors as the target class also tries to\ninitialize the field."}]},{"type":"element","tag":"h4","props":{"id":"example"},"children":[{"type":"text","value":"Example"}]},{"type":"element","tag":"code","props":{"code":"@Mixin(MinecraftServer.class)\npublic abstract class MinecraftServerMixin {\n    @Shadow\n    @Final\n    public long[] tickTimes;\n}\n","language":"java","meta":null},"children":[{"type":"element","tag":"pre","props":{},"children":[{"type":"element","tag":"code","props":{"__ignoreMap":""},"children":[{"type":"element","tag":"span","props":{"class":"line","line":1},"children":[{"type":"element","tag":"span","props":{"class":"ct-025bde"},"children":[{"type":"text","value":"@"}]},{"type":"element","tag":"span","props":{"class":"ct-c756ee"},"children":[{"type":"text","value":"Mixin"}]},{"type":"element","tag":"span","props":{"class":"ct-025bde"},"children":[{"type":"text","value":"(MinecraftServer.class)\n"}]}]},{"type":"element","tag":"span","props":{"class":"line","line":2},"children":[{"type":"element","tag":"span","props":{"class":"ct-c756ee"},"children":[{"type":"text","value":"public"}]},{"type":"element","tag":"span","props":{"class":"ct-025bde"},"children":[{"type":"text","value":" "}]},{"type":"element","tag":"span","props":{"class":"ct-c756ee"},"children":[{"type":"text","value":"abstract"}]},{"type":"element","tag":"span","props":{"class":"ct-025bde"},"children":[{"type":"text","value":" "}]},{"type":"element","tag":"span","props":{"class":"ct-c756ee"},"children":[{"type":"text","value":"class"}]},{"type":"element","tag":"span","props":{"class":"ct-025bde"},"children":[{"type":"text","value":" "}]},{"type":"element","tag":"span","props":{"class":"ct-a7a2aa"},"children":[{"type":"text","value":"MinecraftServerMixin"}]},{"type":"element","tag":"span","props":{"class":"ct-025bde"},"children":[{"type":"text","value":" {\n"}]}]},{"type":"element","tag":"span","props":{"class":"line","line":3},"children":[{"type":"element","tag":"span","props":{"class":"ct-025bde"},"children":[{"type":"text","value":"    @"}]},{"type":"element","tag":"span","props":{"class":"ct-c756ee"},"children":[{"type":"text","value":"Shadow\n"}]}]},{"type":"element","tag":"span","props":{"class":"line","line":4},"children":[{"type":"element","tag":"span","props":{"class":"ct-025bde"},"children":[{"type":"text","value":"    @"}]},{"type":"element","tag":"span","props":{"class":"ct-c756ee"},"children":[{"type":"text","value":"Final\n"}]}]},{"type":"element","tag":"span","props":{"class":"line","line":5},"children":[{"type":"element","tag":"span","props":{"class":"ct-025bde"},"children":[{"type":"text","value":"    "}]},{"type":"element","tag":"span","props":{"class":"ct-c756ee"},"children":[{"type":"text","value":"public"}]},{"type":"element","tag":"span","props":{"class":"ct-025bde"},"children":[{"type":"text","value":" "}]},{"type":"element","tag":"span","props":{"class":"ct-c756ee"},"children":[{"type":"text","value":"long"}]},{"type":"element","tag":"span","props":{"class":"ct-a7a2aa"},"children":[{"type":"text","value":"[] "}]},{"type":"element","tag":"span","props":{"class":"ct-025bde"},"children":[{"type":"text","value":"tickTimes;\n"}]}]},{"type":"element","tag":"span","props":{"class":"line","line":6},"children":[{"type":"element","tag":"span","props":{"class":"ct-025bde"},"children":[{"type":"text","value":"}"}]}]}]}]}]},{"type":"element","tag":"p","props":{},"children":[{"type":"text","value":"The same goes for all methods from your target class. The Minecraft Development plugin provides auto-completion which will create the\nshadowed field/method for you."}]},{"type":"element","tag":"h3","props":{"id":"casting-this"},"children":[{"type":"text","value":"Casting "},{"type":"element","tag":"code-inline","props":{},"children":[{"type":"text","value":"this"}]}]},{"type":"element","tag":"p","props":{},"children":[{"type":"text","value":"Your mixin class gets merged into the original class, so at runtime "},{"type":"element","tag":"code-inline","props":{},"children":[{"type":"text","value":"this"}]},{"type":"text","value":" will have the type of your target. At compile-time though the\ntype of "},{"type":"element","tag":"code-inline","props":{},"children":[{"type":"text","value":"this"}]},{"type":"text","value":" is your mixin class. To prevent compiler errors you can cast "},{"type":"element","tag":"code-inline","props":{},"children":[{"type":"text","value":"this"}]},{"type":"text","value":" into your target."}]},{"type":"element","tag":"h4","props":{"id":"example-1"},"children":[{"type":"text","value":"Example"}]},{"type":"element","tag":"code","props":{"code":"((MinecraftServer) (Object) this).tickTimes\n","language":"java","meta":null},"children":[{"type":"element","tag":"pre","props":{},"children":[{"type":"element","tag":"code","props":{"__ignoreMap":""},"children":[{"type":"element","tag":"span","props":{"class":"line","line":1},"children":[{"type":"element","tag":"span","props":{"class":"ct-025bde"},"children":[{"type":"text","value":"((MinecraftServer) (Object) "}]},{"type":"element","tag":"span","props":{"class":"ct-c36cbd"},"children":[{"type":"text","value":"this"}]},{"type":"element","tag":"span","props":{"class":"ct-025bde"},"children":[{"type":"text","value":").tickTimes"}]}]}]}]}]},{"type":"element","tag":"h2","props":{"id":"mixing-into-other-mods"},"children":[{"type":"text","value":"Mixing into other mods"}]},{"type":"element","tag":"p","props":{},"children":[{"type":"text","value":"You might want to mix into another mod, for example to prevent crashes. This poses a problem: you can't know whether the other mod will be loaded. If it is not loaded your mixin will fail as the target can't be found and the game will crash. There's an easy solution:"}]},{"type":"element","tag":"h3","props":{"id":"the-pseudo-annotation"},"children":[{"type":"text","value":"The "},{"type":"element","tag":"code-inline","props":{},"children":[{"type":"text","value":"@Pseudo"}]},{"type":"text","value":" annotation"}]},{"type":"element","tag":"p","props":{},"children":[{"type":"text","value":"Mixin methods or even entire classes can be marked with "},{"type":"element","tag":"code-inline","props":{},"children":[{"type":"text","value":"@Pseudo"}]},{"type":"text","value":". If the target isn't found (mod isn't loaded), the mixin will fail silently and the game won't crash."}]},{"type":"element","tag":"h2","props":{"id":"compatibility"},"children":[{"type":"text","value":"Compatibility"}]},{"type":"element","tag":"alert","props":{"type":"danger"},"children":[{"type":"element","tag":"p","props":{},"children":[{"type":"element","tag":"strong","props":{},"children":[{"type":"text","value":"Note"}]},{"type":"element","tag":"br","props":{},"children":[]},{"type":"element","tag":"br","props":{},"children":[]},{"type":"text","value":"\nThe following annotations can cause problems with other mods, If possible avoid them and use other less-invasive annotations."}]}]},{"type":"element","tag":"p","props":{},"children":[{"type":"text","value":"Imagine two mods trying to redirect the same method call, what method should be called now?"},{"type":"element","tag":"br","props":{},"children":[]},{"type":"text","value":"\nThat's why you can pass a "},{"type":"element","tag":"code-inline","props":{},"children":[{"type":"text","value":"priority"}]},{"type":"text","value":" or use "},{"type":"element","tag":"code-inline","props":{},"children":[{"type":"text","value":"@Final"}]},{"type":"text","value":" on a mixin method to set the highest possible priority. The higher priority method will be called."}]},{"type":"element","tag":"hr","props":{},"children":[]},{"type":"element","tag":"h3","props":{"id":"the-redirect-annotation"},"children":[{"type":"text","value":"The "},{"type":"element","tag":"code-inline","props":{},"children":[{"type":"text","value":"@Redirect"}]},{"type":"text","value":" annotation"}]},{"type":"element","tag":"p","props":{},"children":[{"type":"element","tag":"code-inline","props":{},"children":[{"type":"text","value":"@Redirect"}]},{"type":"text","value":" allows you to replace a "},{"type":"element","tag":"strong","props":{},"children":[{"type":"text","value":"single method call"}]},{"type":"text","value":" with your own. Instead of the original your method will run."}]},{"type":"element","tag":"h3","props":{"id":"the-overwrite-annotation"},"children":[{"type":"text","value":"The "},{"type":"element","tag":"code-inline","props":{},"children":[{"type":"text","value":"@Overwrite"}]},{"type":"text","value":" annotation"}]},{"type":"element","tag":"p","props":{},"children":[{"type":"element","tag":"code-inline","props":{},"children":[{"type":"text","value":"@Overwrite"}]},{"type":"text","value":" allows you to replace an "},{"type":"element","tag":"strong","props":{},"children":[{"type":"text","value":"entire method"}]},{"type":"text","value":". Whenever the original method would've been called your method will run instead."}]},{"type":"element","tag":"style","children":[{"type":"text","value":".ct-c36cbd{color:#0550AE}\n.ct-a7a2aa{color:#953800}\n.ct-025bde{color:#24292F}\n.ct-c756ee{color:#CF222E}\n.dark .ct-c756ee{color:#FF7B72}\n.dark .ct-025bde{color:#C9D1D9}\n.dark .ct-a7a2aa{color:#FFA657}\n.dark .ct-c36cbd{color:#79C0FF}"}]}],"toc":{"title":"","searchDepth":2,"depth":2,"links":[{"id":"accessing-fields-and-methods-from-your-target-class","depth":2,"text":"Accessing fields and methods from your target class","children":[{"id":"the-shadow-annotation","depth":3,"text":"The @Shadow annotation"},{"id":"casting-this","depth":3,"text":"Casting this"}]},{"id":"mixing-into-other-mods","depth":2,"text":"Mixing into other mods","children":[{"id":"the-pseudo-annotation","depth":3,"text":"The @Pseudo annotation"}]},{"id":"compatibility","depth":2,"text":"Compatibility","children":[{"id":"the-redirect-annotation","depth":3,"text":"The @Redirect annotation"},{"id":"the-overwrite-annotation","depth":3,"text":"The @Overwrite annotation"}]}]}},"_type":"markdown","_id":"content:4.introduction:2.mixins:1.mixin_applications.md","_source":"content","_file":"4.introduction/2.mixins/1.mixin_applications.md","_extension":"md"}