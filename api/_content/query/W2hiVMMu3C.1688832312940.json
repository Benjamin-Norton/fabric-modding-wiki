{"_path":"/misc/codecs","_dir":"misc","_draft":false,"_partial":false,"_locale":"","_empty":false,"title":"Codecs","description":"An advanced guide to using Mojang's Codec system for serializing and deserializing java objects.","body":{"type":"root","children":[{"type":"element","tag":"h1","props":{"id":"codecs"},"children":[{"type":"text","value":"Codecs"}]},{"type":"element","tag":"p","props":{},"children":[{"type":"text","value":"Codec is a system for easily and functionally serializing java objects, and is included in Mojang's DataFixerUpper (DFU)\nlibrary. In a modding context they are usually used as an alternative to GSON and Jankson when reading and writing\ncustom json files, but they tend to be useful in many other situations as well."}]},{"type":"element","tag":"p","props":{},"children":[{"type":"text","value":"They are used in conjunction with another API from DFU, "},{"type":"element","tag":"code-inline","props":{},"children":[{"type":"text","value":"DynamicOps"}]},{"type":"text","value":". A codec defines the structure of an object, while\ndynamic ops are used to define a format to be serialized to and from, such as json or NBT. This means any codec can be\nused with any dynamic ops, and vice versa, allowing for great flexibility."}]},{"type":"element","tag":"h2","props":{"id":"using-codecs"},"children":[{"type":"text","value":"Using Codecs"}]},{"type":"element","tag":"h3","props":{"id":"serializing-and-deserializing"},"children":[{"type":"text","value":"Serializing and Deserializing"}]},{"type":"element","tag":"p","props":{},"children":[{"type":"text","value":"The basic usage of a codec is to serialize and deserialize objects to and from a specific format."}]},{"type":"element","tag":"p","props":{},"children":[{"type":"text","value":"Since a few vanilla classes already have codecs defined, we can use those as an example. Mojang has also provided us\nwith two dynamic ops classes by default, "},{"type":"element","tag":"code-inline","props":{},"children":[{"type":"text","value":"JsonOps"}]},{"type":"text","value":" and "},{"type":"element","tag":"code-inline","props":{},"children":[{"type":"text","value":"NbtOps"}]},{"type":"text","value":", which tend to cover most use cases."}]},{"type":"element","tag":"p","props":{},"children":[{"type":"text","value":"Now, let's say we want to serialize a "},{"type":"element","tag":"code-inline","props":{},"children":[{"type":"text","value":"BlockPos"}]},{"type":"text","value":" to json and back. We can do this using the codec statically stored\nat "},{"type":"element","tag":"code-inline","props":{},"children":[{"type":"text","value":"BlockPos.CODEC"}]},{"type":"text","value":" with the "},{"type":"element","tag":"code-inline","props":{},"children":[{"type":"text","value":"Codec#encodeStart"}]},{"type":"text","value":" and "},{"type":"element","tag":"code-inline","props":{},"children":[{"type":"text","value":"Codec#parse"}]},{"type":"text","value":" methods, respectively."}]},{"type":"element","tag":"code","props":{"code":"BlockPos pos = new BlockPos(1, 2, 3);\n\n// Serialize the BlockPos to a JsonElement\nDataResult<JsonElement> result = BlockPos.CODEC.encodeStart(JsonOps.INSTANCE, pos);\n","language":"java","meta":null},"children":[{"type":"element","tag":"pre","props":{},"children":[{"type":"element","tag":"code","props":{"__ignoreMap":""},"children":[{"type":"element","tag":"span","props":{"class":"line","line":1},"children":[{"type":"element","tag":"span","props":{"class":"ct-dfe620"},"children":[{"type":"text","value":"BlockPos"}]},{"type":"element","tag":"span","props":{"class":"ct-da1098"},"children":[{"type":"text","value":" "}]},{"type":"element","tag":"span","props":{"class":"ct-dfe620"},"children":[{"type":"text","value":"pos"}]},{"type":"element","tag":"span","props":{"class":"ct-da1098"},"children":[{"type":"text","value":" "}]},{"type":"element","tag":"span","props":{"class":"ct-2914d0"},"children":[{"type":"text","value":"="}]},{"type":"element","tag":"span","props":{"class":"ct-dfe620"},"children":[{"type":"text","value":" "}]},{"type":"element","tag":"span","props":{"class":"ct-2914d0"},"children":[{"type":"text","value":"new"}]},{"type":"element","tag":"span","props":{"class":"ct-dfe620"},"children":[{"type":"text","value":" "}]},{"type":"element","tag":"span","props":{"class":"ct-0bce65"},"children":[{"type":"text","value":"BlockPos"}]},{"type":"element","tag":"span","props":{"class":"ct-dfe620"},"children":[{"type":"text","value":"("}]},{"type":"element","tag":"span","props":{"class":"ct-f90f27"},"children":[{"type":"text","value":"1"}]},{"type":"element","tag":"span","props":{"class":"ct-dfe620"},"children":[{"type":"text","value":", "}]},{"type":"element","tag":"span","props":{"class":"ct-f90f27"},"children":[{"type":"text","value":"2"}]},{"type":"element","tag":"span","props":{"class":"ct-dfe620"},"children":[{"type":"text","value":", "}]},{"type":"element","tag":"span","props":{"class":"ct-f90f27"},"children":[{"type":"text","value":"3"}]},{"type":"element","tag":"span","props":{"class":"ct-dfe620"},"children":[{"type":"text","value":");\n"}]}]},{"type":"element","tag":"span","props":{"class":"line","line":2},"children":[{"type":"element","tag":"span","props":{},"children":[{"type":"text","value":"\n"}]}]},{"type":"element","tag":"span","props":{"class":"line","line":3},"children":[{"type":"element","tag":"span","props":{"class":"ct-8eb6ce"},"children":[{"type":"text","value":"// Serialize the BlockPos to a JsonElement\n"}]}]},{"type":"element","tag":"span","props":{"class":"line","line":4},"children":[{"type":"element","tag":"span","props":{"class":"ct-dfe620"},"children":[{"type":"text","value":"DataResult"}]},{"type":"element","tag":"span","props":{"class":"ct-da1098"},"children":[{"type":"text","value":"<"}]},{"type":"element","tag":"span","props":{"class":"ct-2914d0"},"children":[{"type":"text","value":"JsonElement"}]},{"type":"element","tag":"span","props":{"class":"ct-da1098"},"children":[{"type":"text","value":"> "}]},{"type":"element","tag":"span","props":{"class":"ct-dfe620"},"children":[{"type":"text","value":"result"}]},{"type":"element","tag":"span","props":{"class":"ct-da1098"},"children":[{"type":"text","value":" "}]},{"type":"element","tag":"span","props":{"class":"ct-2914d0"},"children":[{"type":"text","value":"="}]},{"type":"element","tag":"span","props":{"class":"ct-dfe620"},"children":[{"type":"text","value":" BlockPos.CODEC."}]},{"type":"element","tag":"span","props":{"class":"ct-0bce65"},"children":[{"type":"text","value":"encodeStart"}]},{"type":"element","tag":"span","props":{"class":"ct-dfe620"},"children":[{"type":"text","value":"(JsonOps.INSTANCE, pos);"}]}]}]}]}]},{"type":"element","tag":"p","props":{},"children":[{"type":"text","value":"When using a codec, values are returned in the form of a "},{"type":"element","tag":"code-inline","props":{},"children":[{"type":"text","value":"DataResult"}]},{"type":"text","value":". This is a wrapper that can represent either a\nsuccess or a failure. We can use this in several ways: If we just want our serialized value, "},{"type":"element","tag":"code-inline","props":{},"children":[{"type":"text","value":"DataResult#result"}]},{"type":"text","value":" will\nsimply return an "},{"type":"element","tag":"code-inline","props":{},"children":[{"type":"text","value":"Optional"}]},{"type":"text","value":" containing our value, while "},{"type":"element","tag":"code-inline","props":{},"children":[{"type":"text","value":"DataResult#resultOrPartial"}]},{"type":"text","value":" also lets us supply a function to\nhandle any errors that may have occurred. The latter is particularly useful for custom datapack resources, where we'd\nwant to log errors without causing issues elsewhere."}]},{"type":"element","tag":"p","props":{},"children":[{"type":"text","value":"So let's grab our serialized value and turn it back into a "},{"type":"element","tag":"code-inline","props":{},"children":[{"type":"text","value":"BlockPos"}]},{"type":"text","value":":"}]},{"type":"element","tag":"code","props":{"code":"// When actually writing a mod, you'll want to properly handle empty Optionals of course\nJsonElement json = result.resultOrPartial(LOGGER::error).orElseThrow();\n\n// Here we have our json value, which should correspond to `[1, 2, 3]`, \n// as that's the format used by the BlockPos codec.\nLOGGER.info(\"Serialized BlockPos: {}\", json);\n\n// Now we'll deserialize the JsonElement back into a BlockPos\nDataResult<BlockPos> result = BlockPos.CODEC.parse(JsonOps.INSTANCE, json);\n\n// Again, we'll just grab our value from the result\nBlockPos pos = result.resultOrPartial(LOGGER::error).orElseThrow();\n\n// And we can see that we've successfully serialized and deserialized our BlockPos!\nLOGGER.info(\"Deserialized BlockPos: {}\", pos);\n","language":"java","meta":null},"children":[{"type":"element","tag":"pre","props":{},"children":[{"type":"element","tag":"code","props":{"__ignoreMap":""},"children":[{"type":"element","tag":"span","props":{"class":"line","line":1},"children":[{"type":"element","tag":"span","props":{"class":"ct-8eb6ce"},"children":[{"type":"text","value":"// When actually writing a mod, you'll want to properly handle empty Optionals of course\n"}]}]},{"type":"element","tag":"span","props":{"class":"line","line":2},"children":[{"type":"element","tag":"span","props":{"class":"ct-dfe620"},"children":[{"type":"text","value":"JsonElement"}]},{"type":"element","tag":"span","props":{"class":"ct-da1098"},"children":[{"type":"text","value":" "}]},{"type":"element","tag":"span","props":{"class":"ct-dfe620"},"children":[{"type":"text","value":"json"}]},{"type":"element","tag":"span","props":{"class":"ct-da1098"},"children":[{"type":"text","value":" "}]},{"type":"element","tag":"span","props":{"class":"ct-2914d0"},"children":[{"type":"text","value":"="}]},{"type":"element","tag":"span","props":{"class":"ct-dfe620"},"children":[{"type":"text","value":" result."}]},{"type":"element","tag":"span","props":{"class":"ct-0bce65"},"children":[{"type":"text","value":"resultOrPartial"}]},{"type":"element","tag":"span","props":{"class":"ct-dfe620"},"children":[{"type":"text","value":"(LOGGER"}]},{"type":"element","tag":"span","props":{"class":"ct-2914d0"},"children":[{"type":"text","value":"::"}]},{"type":"element","tag":"span","props":{"class":"ct-dfe620"},"children":[{"type":"text","value":"error)."}]},{"type":"element","tag":"span","props":{"class":"ct-0bce65"},"children":[{"type":"text","value":"orElseThrow"}]},{"type":"element","tag":"span","props":{"class":"ct-dfe620"},"children":[{"type":"text","value":"();\n"}]}]},{"type":"element","tag":"span","props":{"class":"line","line":3},"children":[{"type":"element","tag":"span","props":{},"children":[{"type":"text","value":"\n"}]}]},{"type":"element","tag":"span","props":{"class":"line","line":4},"children":[{"type":"element","tag":"span","props":{"class":"ct-8eb6ce"},"children":[{"type":"text","value":"// Here we have our json value, which should correspond to `[1, 2, 3]`, \n"}]}]},{"type":"element","tag":"span","props":{"class":"line","line":5},"children":[{"type":"element","tag":"span","props":{"class":"ct-8eb6ce"},"children":[{"type":"text","value":"// as that's the format used by the BlockPos codec.\n"}]}]},{"type":"element","tag":"span","props":{"class":"line","line":6},"children":[{"type":"element","tag":"span","props":{"class":"ct-dfe620"},"children":[{"type":"text","value":"LOGGER."}]},{"type":"element","tag":"span","props":{"class":"ct-0bce65"},"children":[{"type":"text","value":"info"}]},{"type":"element","tag":"span","props":{"class":"ct-dfe620"},"children":[{"type":"text","value":"("}]},{"type":"element","tag":"span","props":{"class":"ct-881d91"},"children":[{"type":"text","value":"\"Serialized BlockPos: {}\""}]},{"type":"element","tag":"span","props":{"class":"ct-dfe620"},"children":[{"type":"text","value":", json);\n"}]}]},{"type":"element","tag":"span","props":{"class":"line","line":7},"children":[{"type":"element","tag":"span","props":{},"children":[{"type":"text","value":"\n"}]}]},{"type":"element","tag":"span","props":{"class":"line","line":8},"children":[{"type":"element","tag":"span","props":{"class":"ct-8eb6ce"},"children":[{"type":"text","value":"// Now we'll deserialize the JsonElement back into a BlockPos\n"}]}]},{"type":"element","tag":"span","props":{"class":"line","line":9},"children":[{"type":"element","tag":"span","props":{"class":"ct-dfe620"},"children":[{"type":"text","value":"DataResult"}]},{"type":"element","tag":"span","props":{"class":"ct-da1098"},"children":[{"type":"text","value":"<"}]},{"type":"element","tag":"span","props":{"class":"ct-2914d0"},"children":[{"type":"text","value":"BlockPos"}]},{"type":"element","tag":"span","props":{"class":"ct-da1098"},"children":[{"type":"text","value":"> "}]},{"type":"element","tag":"span","props":{"class":"ct-dfe620"},"children":[{"type":"text","value":"result"}]},{"type":"element","tag":"span","props":{"class":"ct-da1098"},"children":[{"type":"text","value":" "}]},{"type":"element","tag":"span","props":{"class":"ct-2914d0"},"children":[{"type":"text","value":"="}]},{"type":"element","tag":"span","props":{"class":"ct-dfe620"},"children":[{"type":"text","value":" BlockPos.CODEC."}]},{"type":"element","tag":"span","props":{"class":"ct-0bce65"},"children":[{"type":"text","value":"parse"}]},{"type":"element","tag":"span","props":{"class":"ct-dfe620"},"children":[{"type":"text","value":"(JsonOps.INSTANCE, json);\n"}]}]},{"type":"element","tag":"span","props":{"class":"line","line":10},"children":[{"type":"element","tag":"span","props":{},"children":[{"type":"text","value":"\n"}]}]},{"type":"element","tag":"span","props":{"class":"line","line":11},"children":[{"type":"element","tag":"span","props":{"class":"ct-8eb6ce"},"children":[{"type":"text","value":"// Again, we'll just grab our value from the result\n"}]}]},{"type":"element","tag":"span","props":{"class":"line","line":12},"children":[{"type":"element","tag":"span","props":{"class":"ct-dfe620"},"children":[{"type":"text","value":"BlockPos"}]},{"type":"element","tag":"span","props":{"class":"ct-da1098"},"children":[{"type":"text","value":" "}]},{"type":"element","tag":"span","props":{"class":"ct-dfe620"},"children":[{"type":"text","value":"pos"}]},{"type":"element","tag":"span","props":{"class":"ct-da1098"},"children":[{"type":"text","value":" "}]},{"type":"element","tag":"span","props":{"class":"ct-2914d0"},"children":[{"type":"text","value":"="}]},{"type":"element","tag":"span","props":{"class":"ct-dfe620"},"children":[{"type":"text","value":" result."}]},{"type":"element","tag":"span","props":{"class":"ct-0bce65"},"children":[{"type":"text","value":"resultOrPartial"}]},{"type":"element","tag":"span","props":{"class":"ct-dfe620"},"children":[{"type":"text","value":"(LOGGER"}]},{"type":"element","tag":"span","props":{"class":"ct-2914d0"},"children":[{"type":"text","value":"::"}]},{"type":"element","tag":"span","props":{"class":"ct-dfe620"},"children":[{"type":"text","value":"error)."}]},{"type":"element","tag":"span","props":{"class":"ct-0bce65"},"children":[{"type":"text","value":"orElseThrow"}]},{"type":"element","tag":"span","props":{"class":"ct-dfe620"},"children":[{"type":"text","value":"();\n"}]}]},{"type":"element","tag":"span","props":{"class":"line","line":13},"children":[{"type":"element","tag":"span","props":{},"children":[{"type":"text","value":"\n"}]}]},{"type":"element","tag":"span","props":{"class":"line","line":14},"children":[{"type":"element","tag":"span","props":{"class":"ct-8eb6ce"},"children":[{"type":"text","value":"// And we can see that we've successfully serialized and deserialized our BlockPos!\n"}]}]},{"type":"element","tag":"span","props":{"class":"line","line":15},"children":[{"type":"element","tag":"span","props":{"class":"ct-dfe620"},"children":[{"type":"text","value":"LOGGER."}]},{"type":"element","tag":"span","props":{"class":"ct-0bce65"},"children":[{"type":"text","value":"info"}]},{"type":"element","tag":"span","props":{"class":"ct-dfe620"},"children":[{"type":"text","value":"("}]},{"type":"element","tag":"span","props":{"class":"ct-881d91"},"children":[{"type":"text","value":"\"Deserialized BlockPos: {}\""}]},{"type":"element","tag":"span","props":{"class":"ct-dfe620"},"children":[{"type":"text","value":", pos);"}]}]}]}]}]},{"type":"element","tag":"h3","props":{"id":"built-in-codecs"},"children":[{"type":"text","value":"Built-in Codecs"}]},{"type":"element","tag":"p","props":{},"children":[{"type":"text","value":"As mentioned earlier, Mojang has already defined codecs for several vanilla and standard Java classes, including but not\nlimited to "},{"type":"element","tag":"code-inline","props":{},"children":[{"type":"text","value":"BlockPos"}]},{"type":"text","value":", "},{"type":"element","tag":"code-inline","props":{},"children":[{"type":"text","value":"BlockState"}]},{"type":"text","value":", "},{"type":"element","tag":"code-inline","props":{},"children":[{"type":"text","value":"ItemStack"}]},{"type":"text","value":", "},{"type":"element","tag":"code-inline","props":{},"children":[{"type":"text","value":"Identifier"}]},{"type":"text","value":", "},{"type":"element","tag":"code-inline","props":{},"children":[{"type":"text","value":"Text"}]},{"type":"text","value":", and regex "},{"type":"element","tag":"code-inline","props":{},"children":[{"type":"text","value":"Pattern"}]},{"type":"text","value":"s. Codecs for Mojang's own\nclasses are usually found as static fields named "},{"type":"element","tag":"code-inline","props":{},"children":[{"type":"text","value":"CODEC"}]},{"type":"text","value":" on the class itself, while most others are kept in the "},{"type":"element","tag":"code-inline","props":{},"children":[{"type":"text","value":"Codecs"}]},{"type":"text","value":"\nclass. It should also be noted that all vanilla registries contain a "},{"type":"element","tag":"code-inline","props":{},"children":[{"type":"text","value":"getCodec()"}]},{"type":"text","value":" method, for example, you\ncan use "},{"type":"element","tag":"code-inline","props":{},"children":[{"type":"text","value":"Registries.BLOCK.getCodec()"}]},{"type":"text","value":" to get a "},{"type":"element","tag":"code-inline","props":{},"children":[{"type":"text","value":"Codec<Block>"}]},{"type":"text","value":" which serializes to the block id and back."}]},{"type":"element","tag":"p","props":{},"children":[{"type":"text","value":"The codec api itself also contains some codecs for primitive types, such as "},{"type":"element","tag":"code-inline","props":{},"children":[{"type":"text","value":"Codec.INT"}]},{"type":"text","value":" and "},{"type":"element","tag":"code-inline","props":{},"children":[{"type":"text","value":"Codec.STRING"}]},{"type":"text","value":". These are\navailable as statics on the "},{"type":"element","tag":"code-inline","props":{},"children":[{"type":"text","value":"Codec"}]},{"type":"text","value":" class, and are usually used as the base for more complex codecs, as explained below."}]},{"type":"element","tag":"h2","props":{"id":"building-codecs"},"children":[{"type":"text","value":"Building Codecs"}]},{"type":"element","tag":"p","props":{},"children":[{"type":"text","value":"Now that we've seen how to use codecs, let's take a look at how we can build our own. Suppose we have the following\nclass, and we want to deserialize instances of it from json files:"}]},{"type":"element","tag":"code","props":{"code":"public class CoolBeansClass {\n    \n    private final int beansAmount;\n    private final Item beanType;\n    private final List<BlockPos> beanPositions;\n\n    public CoolBeansClass(int beansAmount, Item beanType, List<BlockPos> beanPositions) {...}\n\n    public int getBeansAmount() { return this.beansAmount; }\n    public Item getBeanType() { return this.beanType; }\n    public List<BlockPos> getBeanPositions() { return this.beanPositions; }\n}\n","language":"java","meta":null},"children":[{"type":"element","tag":"pre","props":{},"children":[{"type":"element","tag":"code","props":{"__ignoreMap":""},"children":[{"type":"element","tag":"span","props":{"class":"line","line":1},"children":[{"type":"element","tag":"span","props":{"class":"ct-2914d0"},"children":[{"type":"text","value":"public"}]},{"type":"element","tag":"span","props":{"class":"ct-dfe620"},"children":[{"type":"text","value":" "}]},{"type":"element","tag":"span","props":{"class":"ct-2914d0"},"children":[{"type":"text","value":"class"}]},{"type":"element","tag":"span","props":{"class":"ct-dfe620"},"children":[{"type":"text","value":" "}]},{"type":"element","tag":"span","props":{"class":"ct-da1098"},"children":[{"type":"text","value":"CoolBeansClass"}]},{"type":"element","tag":"span","props":{"class":"ct-dfe620"},"children":[{"type":"text","value":" {\n"}]}]},{"type":"element","tag":"span","props":{"class":"line","line":2},"children":[{"type":"element","tag":"span","props":{"class":"ct-dfe620"},"children":[{"type":"text","value":"    \n"}]}]},{"type":"element","tag":"span","props":{"class":"line","line":3},"children":[{"type":"element","tag":"span","props":{"class":"ct-dfe620"},"children":[{"type":"text","value":"    "}]},{"type":"element","tag":"span","props":{"class":"ct-2914d0"},"children":[{"type":"text","value":"private"}]},{"type":"element","tag":"span","props":{"class":"ct-dfe620"},"children":[{"type":"text","value":" "}]},{"type":"element","tag":"span","props":{"class":"ct-2914d0"},"children":[{"type":"text","value":"final"}]},{"type":"element","tag":"span","props":{"class":"ct-dfe620"},"children":[{"type":"text","value":" "}]},{"type":"element","tag":"span","props":{"class":"ct-2914d0"},"children":[{"type":"text","value":"int"}]},{"type":"element","tag":"span","props":{"class":"ct-da1098"},"children":[{"type":"text","value":" "}]},{"type":"element","tag":"span","props":{"class":"ct-dfe620"},"children":[{"type":"text","value":"beansAmount;\n"}]}]},{"type":"element","tag":"span","props":{"class":"line","line":4},"children":[{"type":"element","tag":"span","props":{"class":"ct-dfe620"},"children":[{"type":"text","value":"    "}]},{"type":"element","tag":"span","props":{"class":"ct-2914d0"},"children":[{"type":"text","value":"private"}]},{"type":"element","tag":"span","props":{"class":"ct-dfe620"},"children":[{"type":"text","value":" "}]},{"type":"element","tag":"span","props":{"class":"ct-2914d0"},"children":[{"type":"text","value":"final"}]},{"type":"element","tag":"span","props":{"class":"ct-dfe620"},"children":[{"type":"text","value":" Item"}]},{"type":"element","tag":"span","props":{"class":"ct-da1098"},"children":[{"type":"text","value":" "}]},{"type":"element","tag":"span","props":{"class":"ct-dfe620"},"children":[{"type":"text","value":"beanType;\n"}]}]},{"type":"element","tag":"span","props":{"class":"line","line":5},"children":[{"type":"element","tag":"span","props":{"class":"ct-dfe620"},"children":[{"type":"text","value":"    "}]},{"type":"element","tag":"span","props":{"class":"ct-2914d0"},"children":[{"type":"text","value":"private"}]},{"type":"element","tag":"span","props":{"class":"ct-dfe620"},"children":[{"type":"text","value":" "}]},{"type":"element","tag":"span","props":{"class":"ct-2914d0"},"children":[{"type":"text","value":"final"}]},{"type":"element","tag":"span","props":{"class":"ct-dfe620"},"children":[{"type":"text","value":" List"}]},{"type":"element","tag":"span","props":{"class":"ct-da1098"},"children":[{"type":"text","value":"<"}]},{"type":"element","tag":"span","props":{"class":"ct-2914d0"},"children":[{"type":"text","value":"BlockPos"}]},{"type":"element","tag":"span","props":{"class":"ct-da1098"},"children":[{"type":"text","value":"> "}]},{"type":"element","tag":"span","props":{"class":"ct-dfe620"},"children":[{"type":"text","value":"beanPositions;\n"}]}]},{"type":"element","tag":"span","props":{"class":"line","line":6},"children":[{"type":"element","tag":"span","props":{},"children":[{"type":"text","value":"\n"}]}]},{"type":"element","tag":"span","props":{"class":"line","line":7},"children":[{"type":"element","tag":"span","props":{"class":"ct-dfe620"},"children":[{"type":"text","value":"    "}]},{"type":"element","tag":"span","props":{"class":"ct-2914d0"},"children":[{"type":"text","value":"public"}]},{"type":"element","tag":"span","props":{"class":"ct-dfe620"},"children":[{"type":"text","value":" "}]},{"type":"element","tag":"span","props":{"class":"ct-0bce65"},"children":[{"type":"text","value":"CoolBeansClass"}]},{"type":"element","tag":"span","props":{"class":"ct-dfe620"},"children":[{"type":"text","value":"("}]},{"type":"element","tag":"span","props":{"class":"ct-2914d0"},"children":[{"type":"text","value":"int"}]},{"type":"element","tag":"span","props":{"class":"ct-dfe620"},"children":[{"type":"text","value":" "}]},{"type":"element","tag":"span","props":{"class":"ct-da1098"},"children":[{"type":"text","value":"beansAmount"}]},{"type":"element","tag":"span","props":{"class":"ct-dfe620"},"children":[{"type":"text","value":", Item "}]},{"type":"element","tag":"span","props":{"class":"ct-da1098"},"children":[{"type":"text","value":"beanType"}]},{"type":"element","tag":"span","props":{"class":"ct-dfe620"},"children":[{"type":"text","value":", List<"}]},{"type":"element","tag":"span","props":{"class":"ct-2914d0"},"children":[{"type":"text","value":"BlockPos"}]},{"type":"element","tag":"span","props":{"class":"ct-dfe620"},"children":[{"type":"text","value":"> "}]},{"type":"element","tag":"span","props":{"class":"ct-da1098"},"children":[{"type":"text","value":"beanPositions"}]},{"type":"element","tag":"span","props":{"class":"ct-dfe620"},"children":[{"type":"text","value":") {...}\n"}]}]},{"type":"element","tag":"span","props":{"class":"line","line":8},"children":[{"type":"element","tag":"span","props":{},"children":[{"type":"text","value":"\n"}]}]},{"type":"element","tag":"span","props":{"class":"line","line":9},"children":[{"type":"element","tag":"span","props":{"class":"ct-dfe620"},"children":[{"type":"text","value":"    "}]},{"type":"element","tag":"span","props":{"class":"ct-2914d0"},"children":[{"type":"text","value":"public"}]},{"type":"element","tag":"span","props":{"class":"ct-dfe620"},"children":[{"type":"text","value":" "}]},{"type":"element","tag":"span","props":{"class":"ct-2914d0"},"children":[{"type":"text","value":"int"}]},{"type":"element","tag":"span","props":{"class":"ct-dfe620"},"children":[{"type":"text","value":" "}]},{"type":"element","tag":"span","props":{"class":"ct-0bce65"},"children":[{"type":"text","value":"getBeansAmount"}]},{"type":"element","tag":"span","props":{"class":"ct-dfe620"},"children":[{"type":"text","value":"() { "}]},{"type":"element","tag":"span","props":{"class":"ct-2914d0"},"children":[{"type":"text","value":"return"}]},{"type":"element","tag":"span","props":{"class":"ct-dfe620"},"children":[{"type":"text","value":" "}]},{"type":"element","tag":"span","props":{"class":"ct-f90f27"},"children":[{"type":"text","value":"this"}]},{"type":"element","tag":"span","props":{"class":"ct-dfe620"},"children":[{"type":"text","value":".beansAmount; }\n"}]}]},{"type":"element","tag":"span","props":{"class":"line","line":10},"children":[{"type":"element","tag":"span","props":{"class":"ct-dfe620"},"children":[{"type":"text","value":"    "}]},{"type":"element","tag":"span","props":{"class":"ct-2914d0"},"children":[{"type":"text","value":"public"}]},{"type":"element","tag":"span","props":{"class":"ct-dfe620"},"children":[{"type":"text","value":" Item "}]},{"type":"element","tag":"span","props":{"class":"ct-0bce65"},"children":[{"type":"text","value":"getBeanType"}]},{"type":"element","tag":"span","props":{"class":"ct-dfe620"},"children":[{"type":"text","value":"() { "}]},{"type":"element","tag":"span","props":{"class":"ct-2914d0"},"children":[{"type":"text","value":"return"}]},{"type":"element","tag":"span","props":{"class":"ct-dfe620"},"children":[{"type":"text","value":" "}]},{"type":"element","tag":"span","props":{"class":"ct-f90f27"},"children":[{"type":"text","value":"this"}]},{"type":"element","tag":"span","props":{"class":"ct-dfe620"},"children":[{"type":"text","value":".beanType; }\n"}]}]},{"type":"element","tag":"span","props":{"class":"line","line":11},"children":[{"type":"element","tag":"span","props":{"class":"ct-dfe620"},"children":[{"type":"text","value":"    "}]},{"type":"element","tag":"span","props":{"class":"ct-2914d0"},"children":[{"type":"text","value":"public"}]},{"type":"element","tag":"span","props":{"class":"ct-dfe620"},"children":[{"type":"text","value":" List<"}]},{"type":"element","tag":"span","props":{"class":"ct-2914d0"},"children":[{"type":"text","value":"BlockPos"}]},{"type":"element","tag":"span","props":{"class":"ct-dfe620"},"children":[{"type":"text","value":"> "}]},{"type":"element","tag":"span","props":{"class":"ct-0bce65"},"children":[{"type":"text","value":"getBeanPositions"}]},{"type":"element","tag":"span","props":{"class":"ct-dfe620"},"children":[{"type":"text","value":"() { "}]},{"type":"element","tag":"span","props":{"class":"ct-2914d0"},"children":[{"type":"text","value":"return"}]},{"type":"element","tag":"span","props":{"class":"ct-dfe620"},"children":[{"type":"text","value":" "}]},{"type":"element","tag":"span","props":{"class":"ct-f90f27"},"children":[{"type":"text","value":"this"}]},{"type":"element","tag":"span","props":{"class":"ct-dfe620"},"children":[{"type":"text","value":".beanPositions; }\n"}]}]},{"type":"element","tag":"span","props":{"class":"line","line":12},"children":[{"type":"element","tag":"span","props":{"class":"ct-dfe620"},"children":[{"type":"text","value":"}"}]}]}]}]}]},{"type":"element","tag":"p","props":{},"children":[{"type":"text","value":"The corresponding json file might look something like this:"}]},{"type":"element","tag":"code","props":{"code":"{\n  \"beans_amount\": 5,\n  \"bean_type\": \"beanmod:mythical_beans\",\n  \"bean_positions\": [\n    [1, 2, 3],\n    [4, 5, 6]\n  ]\n}\n","language":"json","meta":null},"children":[{"type":"element","tag":"pre","props":{},"children":[{"type":"element","tag":"code","props":{"__ignoreMap":""},"children":[{"type":"element","tag":"span","props":{"class":"line","line":1},"children":[{"type":"element","tag":"span","props":{"class":"ct-dfe620"},"children":[{"type":"text","value":"{\n"}]}]},{"type":"element","tag":"span","props":{"class":"line","line":2},"children":[{"type":"element","tag":"span","props":{"class":"ct-dfe620"},"children":[{"type":"text","value":"  "}]},{"type":"element","tag":"span","props":{"class":"ct-773d84"},"children":[{"type":"text","value":"\"beans_amount\""}]},{"type":"element","tag":"span","props":{"class":"ct-dfe620"},"children":[{"type":"text","value":": "}]},{"type":"element","tag":"span","props":{"class":"ct-f90f27"},"children":[{"type":"text","value":"5"}]},{"type":"element","tag":"span","props":{"class":"ct-dfe620"},"children":[{"type":"text","value":",\n"}]}]},{"type":"element","tag":"span","props":{"class":"line","line":3},"children":[{"type":"element","tag":"span","props":{"class":"ct-dfe620"},"children":[{"type":"text","value":"  "}]},{"type":"element","tag":"span","props":{"class":"ct-773d84"},"children":[{"type":"text","value":"\"bean_type\""}]},{"type":"element","tag":"span","props":{"class":"ct-dfe620"},"children":[{"type":"text","value":": "}]},{"type":"element","tag":"span","props":{"class":"ct-881d91"},"children":[{"type":"text","value":"\"beanmod:mythical_beans\""}]},{"type":"element","tag":"span","props":{"class":"ct-dfe620"},"children":[{"type":"text","value":",\n"}]}]},{"type":"element","tag":"span","props":{"class":"line","line":4},"children":[{"type":"element","tag":"span","props":{"class":"ct-dfe620"},"children":[{"type":"text","value":"  "}]},{"type":"element","tag":"span","props":{"class":"ct-773d84"},"children":[{"type":"text","value":"\"bean_positions\""}]},{"type":"element","tag":"span","props":{"class":"ct-dfe620"},"children":[{"type":"text","value":": [\n"}]}]},{"type":"element","tag":"span","props":{"class":"line","line":5},"children":[{"type":"element","tag":"span","props":{"class":"ct-dfe620"},"children":[{"type":"text","value":"    ["}]},{"type":"element","tag":"span","props":{"class":"ct-f90f27"},"children":[{"type":"text","value":"1"}]},{"type":"element","tag":"span","props":{"class":"ct-dfe620"},"children":[{"type":"text","value":", "}]},{"type":"element","tag":"span","props":{"class":"ct-f90f27"},"children":[{"type":"text","value":"2"}]},{"type":"element","tag":"span","props":{"class":"ct-dfe620"},"children":[{"type":"text","value":", "}]},{"type":"element","tag":"span","props":{"class":"ct-f90f27"},"children":[{"type":"text","value":"3"}]},{"type":"element","tag":"span","props":{"class":"ct-dfe620"},"children":[{"type":"text","value":"],\n"}]}]},{"type":"element","tag":"span","props":{"class":"line","line":6},"children":[{"type":"element","tag":"span","props":{"class":"ct-dfe620"},"children":[{"type":"text","value":"    ["}]},{"type":"element","tag":"span","props":{"class":"ct-f90f27"},"children":[{"type":"text","value":"4"}]},{"type":"element","tag":"span","props":{"class":"ct-dfe620"},"children":[{"type":"text","value":", "}]},{"type":"element","tag":"span","props":{"class":"ct-f90f27"},"children":[{"type":"text","value":"5"}]},{"type":"element","tag":"span","props":{"class":"ct-dfe620"},"children":[{"type":"text","value":", "}]},{"type":"element","tag":"span","props":{"class":"ct-f90f27"},"children":[{"type":"text","value":"6"}]},{"type":"element","tag":"span","props":{"class":"ct-dfe620"},"children":[{"type":"text","value":"]\n"}]}]},{"type":"element","tag":"span","props":{"class":"line","line":7},"children":[{"type":"element","tag":"span","props":{"class":"ct-dfe620"},"children":[{"type":"text","value":"  ]\n"}]}]},{"type":"element","tag":"span","props":{"class":"line","line":8},"children":[{"type":"element","tag":"span","props":{"class":"ct-dfe620"},"children":[{"type":"text","value":"}"}]}]}]}]}]},{"type":"element","tag":"p","props":{},"children":[{"type":"text","value":"We can make a codec for this class by putting together multiple smaller codecs into a larger one. In this case, we'll\nneed one for each field:"}]},{"type":"element","tag":"ul","props":{},"children":[{"type":"element","tag":"li","props":{},"children":[{"type":"text","value":"a "},{"type":"element","tag":"code-inline","props":{},"children":[{"type":"text","value":"Codec<Integer>"}]}]},{"type":"element","tag":"li","props":{},"children":[{"type":"text","value":"a "},{"type":"element","tag":"code-inline","props":{},"children":[{"type":"text","value":"Codec<Item>"}]}]},{"type":"element","tag":"li","props":{},"children":[{"type":"text","value":"a "},{"type":"element","tag":"code-inline","props":{},"children":[{"type":"text","value":"Codec<List<BlockPos>>"}]}]}]},{"type":"element","tag":"p","props":{},"children":[{"type":"text","value":"We can get the first one from the aforementioned primitive codecs in the "},{"type":"element","tag":"code-inline","props":{},"children":[{"type":"text","value":"Codec"}]},{"type":"text","value":" class, specifically "},{"type":"element","tag":"code-inline","props":{},"children":[{"type":"text","value":"Codec.INT"}]},{"type":"text","value":". While\nthe second one can be obtained from the "},{"type":"element","tag":"code-inline","props":{},"children":[{"type":"text","value":"Registries.ITEM"}]},{"type":"text","value":" registry, which has a "},{"type":"element","tag":"code-inline","props":{},"children":[{"type":"text","value":"getCodec()"}]},{"type":"text","value":" method that returns a\n"},{"type":"element","tag":"code-inline","props":{},"children":[{"type":"text","value":"Codec<Item>"}]},{"type":"text","value":". We don't have a default codec for "},{"type":"element","tag":"code-inline","props":{},"children":[{"type":"text","value":"List<BlockPos>"}]},{"type":"text","value":", but we can make one from "},{"type":"element","tag":"code-inline","props":{},"children":[{"type":"text","value":"BlockPos.CODEC"}]},{"type":"text","value":"."}]},{"type":"element","tag":"h3","props":{"id":"lists"},"children":[{"type":"text","value":"Lists"}]},{"type":"element","tag":"p","props":{},"children":[{"type":"element","tag":"code-inline","props":{},"children":[{"type":"text","value":"Codec#listOf"}]},{"type":"text","value":" can be used to create a list version of any codec:"}]},{"type":"element","tag":"code","props":{"code":"Codec<List<BlockPos>> listCodec = BlockPos.CODEC.listOf();\n","language":"java","meta":null},"children":[{"type":"element","tag":"pre","props":{},"children":[{"type":"element","tag":"code","props":{"__ignoreMap":""},"children":[{"type":"element","tag":"span","props":{"class":"line","line":1},"children":[{"type":"element","tag":"span","props":{"class":"ct-dfe620"},"children":[{"type":"text","value":"Codec"}]},{"type":"element","tag":"span","props":{"class":"ct-da1098"},"children":[{"type":"text","value":"<"}]},{"type":"element","tag":"span","props":{"class":"ct-dfe620"},"children":[{"type":"text","value":"List"}]},{"type":"element","tag":"span","props":{"class":"ct-da1098"},"children":[{"type":"text","value":"<"}]},{"type":"element","tag":"span","props":{"class":"ct-2914d0"},"children":[{"type":"text","value":"BlockPos"}]},{"type":"element","tag":"span","props":{"class":"ct-da1098"},"children":[{"type":"text","value":">> "}]},{"type":"element","tag":"span","props":{"class":"ct-dfe620"},"children":[{"type":"text","value":"listCodec"}]},{"type":"element","tag":"span","props":{"class":"ct-da1098"},"children":[{"type":"text","value":" "}]},{"type":"element","tag":"span","props":{"class":"ct-2914d0"},"children":[{"type":"text","value":"="}]},{"type":"element","tag":"span","props":{"class":"ct-dfe620"},"children":[{"type":"text","value":" BlockPos.CODEC."}]},{"type":"element","tag":"span","props":{"class":"ct-0bce65"},"children":[{"type":"text","value":"listOf"}]},{"type":"element","tag":"span","props":{"class":"ct-dfe620"},"children":[{"type":"text","value":"();"}]}]}]}]}]},{"type":"element","tag":"p","props":{},"children":[{"type":"text","value":"It should be noted that codecs created in this way will always deserialize to an "},{"type":"element","tag":"code-inline","props":{},"children":[{"type":"text","value":"ImmutableList"}]},{"type":"text","value":". If you need a mutable\nlist instead, you can make use of "},{"type":"element","tag":"a","props":{"href":"#mutually-convertible-types-and-you"},"children":[{"type":"text","value":"xmap"}]},{"type":"text","value":" to convert to one during\ndeserialization."}]},{"type":"element","tag":"h3","props":{"id":"merging-codecs-for-record-like-classes"},"children":[{"type":"text","value":"Merging Codecs for Record-like Classes"}]},{"type":"element","tag":"p","props":{},"children":[{"type":"text","value":"Now that we have separate codecs for each field, we can combine them into one codec for our class using\na "},{"type":"element","tag":"code-inline","props":{},"children":[{"type":"text","value":"RecordCodecBuilder"}]},{"type":"text","value":". This assumes that our class has a constructor containing every field we want to serialize, and\nthat every field has a corresponding getter method. This makes it perfect to use in conjunction with records, but it can\nalso be used with regular classes."}]},{"type":"element","tag":"p","props":{},"children":[{"type":"text","value":"Let's take a look at how to create a codec for our "},{"type":"element","tag":"code-inline","props":{},"children":[{"type":"text","value":"CoolBeansClass"}]},{"type":"text","value":":"}]},{"type":"element","tag":"code","props":{"code":"public static final Codec<CoolBeansClass> CODEC = RecordCodecBuilder.create(instance -> instance.group(\n    Codec.INT.fieldOf(\"beans_amount\").forGetter(CoolBeansClass::getBeansAmount),\n    Registries.ITEM.getCodec().fieldOf(\"bean_type\").forGetter(CoolBeansClass::getBeanType),\n    BlockPos.CODEC.listOf().fieldOf(\"bean_positions\").forGetter(CoolBeansClass::getBeanPositions)\n    // Up to 16 fields can be declared here\n).apply(instance, CoolBeansClass::new));\n","language":"java","meta":null},"children":[{"type":"element","tag":"pre","props":{},"children":[{"type":"element","tag":"code","props":{"__ignoreMap":""},"children":[{"type":"element","tag":"span","props":{"class":"line","line":1},"children":[{"type":"element","tag":"span","props":{"class":"ct-2914d0"},"children":[{"type":"text","value":"public"}]},{"type":"element","tag":"span","props":{"class":"ct-dfe620"},"children":[{"type":"text","value":" "}]},{"type":"element","tag":"span","props":{"class":"ct-2914d0"},"children":[{"type":"text","value":"static"}]},{"type":"element","tag":"span","props":{"class":"ct-dfe620"},"children":[{"type":"text","value":" "}]},{"type":"element","tag":"span","props":{"class":"ct-2914d0"},"children":[{"type":"text","value":"final"}]},{"type":"element","tag":"span","props":{"class":"ct-dfe620"},"children":[{"type":"text","value":" Codec"}]},{"type":"element","tag":"span","props":{"class":"ct-da1098"},"children":[{"type":"text","value":"<"}]},{"type":"element","tag":"span","props":{"class":"ct-2914d0"},"children":[{"type":"text","value":"CoolBeansClass"}]},{"type":"element","tag":"span","props":{"class":"ct-da1098"},"children":[{"type":"text","value":"> "}]},{"type":"element","tag":"span","props":{"class":"ct-dfe620"},"children":[{"type":"text","value":"CODEC"}]},{"type":"element","tag":"span","props":{"class":"ct-da1098"},"children":[{"type":"text","value":" "}]},{"type":"element","tag":"span","props":{"class":"ct-2914d0"},"children":[{"type":"text","value":"="}]},{"type":"element","tag":"span","props":{"class":"ct-dfe620"},"children":[{"type":"text","value":" RecordCodecBuilder."}]},{"type":"element","tag":"span","props":{"class":"ct-0bce65"},"children":[{"type":"text","value":"create"}]},{"type":"element","tag":"span","props":{"class":"ct-dfe620"},"children":[{"type":"text","value":"(instance "}]},{"type":"element","tag":"span","props":{"class":"ct-2914d0"},"children":[{"type":"text","value":"->"}]},{"type":"element","tag":"span","props":{"class":"ct-dfe620"},"children":[{"type":"text","value":" instance."}]},{"type":"element","tag":"span","props":{"class":"ct-0bce65"},"children":[{"type":"text","value":"group"}]},{"type":"element","tag":"span","props":{"class":"ct-dfe620"},"children":[{"type":"text","value":"(\n"}]}]},{"type":"element","tag":"span","props":{"class":"line","line":2},"children":[{"type":"element","tag":"span","props":{"class":"ct-dfe620"},"children":[{"type":"text","value":"    Codec.INT."}]},{"type":"element","tag":"span","props":{"class":"ct-0bce65"},"children":[{"type":"text","value":"fieldOf"}]},{"type":"element","tag":"span","props":{"class":"ct-dfe620"},"children":[{"type":"text","value":"("}]},{"type":"element","tag":"span","props":{"class":"ct-881d91"},"children":[{"type":"text","value":"\"beans_amount\""}]},{"type":"element","tag":"span","props":{"class":"ct-dfe620"},"children":[{"type":"text","value":")."}]},{"type":"element","tag":"span","props":{"class":"ct-0bce65"},"children":[{"type":"text","value":"forGetter"}]},{"type":"element","tag":"span","props":{"class":"ct-dfe620"},"children":[{"type":"text","value":"(CoolBeansClass"}]},{"type":"element","tag":"span","props":{"class":"ct-2914d0"},"children":[{"type":"text","value":"::"}]},{"type":"element","tag":"span","props":{"class":"ct-dfe620"},"children":[{"type":"text","value":"getBeansAmount),\n"}]}]},{"type":"element","tag":"span","props":{"class":"line","line":3},"children":[{"type":"element","tag":"span","props":{"class":"ct-dfe620"},"children":[{"type":"text","value":"    Registries.ITEM."}]},{"type":"element","tag":"span","props":{"class":"ct-0bce65"},"children":[{"type":"text","value":"getCodec"}]},{"type":"element","tag":"span","props":{"class":"ct-dfe620"},"children":[{"type":"text","value":"()."}]},{"type":"element","tag":"span","props":{"class":"ct-0bce65"},"children":[{"type":"text","value":"fieldOf"}]},{"type":"element","tag":"span","props":{"class":"ct-dfe620"},"children":[{"type":"text","value":"("}]},{"type":"element","tag":"span","props":{"class":"ct-881d91"},"children":[{"type":"text","value":"\"bean_type\""}]},{"type":"element","tag":"span","props":{"class":"ct-dfe620"},"children":[{"type":"text","value":")."}]},{"type":"element","tag":"span","props":{"class":"ct-0bce65"},"children":[{"type":"text","value":"forGetter"}]},{"type":"element","tag":"span","props":{"class":"ct-dfe620"},"children":[{"type":"text","value":"(CoolBeansClass"}]},{"type":"element","tag":"span","props":{"class":"ct-2914d0"},"children":[{"type":"text","value":"::"}]},{"type":"element","tag":"span","props":{"class":"ct-dfe620"},"children":[{"type":"text","value":"getBeanType),\n"}]}]},{"type":"element","tag":"span","props":{"class":"line","line":4},"children":[{"type":"element","tag":"span","props":{"class":"ct-dfe620"},"children":[{"type":"text","value":"    BlockPos.CODEC."}]},{"type":"element","tag":"span","props":{"class":"ct-0bce65"},"children":[{"type":"text","value":"listOf"}]},{"type":"element","tag":"span","props":{"class":"ct-dfe620"},"children":[{"type":"text","value":"()."}]},{"type":"element","tag":"span","props":{"class":"ct-0bce65"},"children":[{"type":"text","value":"fieldOf"}]},{"type":"element","tag":"span","props":{"class":"ct-dfe620"},"children":[{"type":"text","value":"("}]},{"type":"element","tag":"span","props":{"class":"ct-881d91"},"children":[{"type":"text","value":"\"bean_positions\""}]},{"type":"element","tag":"span","props":{"class":"ct-dfe620"},"children":[{"type":"text","value":")."}]},{"type":"element","tag":"span","props":{"class":"ct-0bce65"},"children":[{"type":"text","value":"forGetter"}]},{"type":"element","tag":"span","props":{"class":"ct-dfe620"},"children":[{"type":"text","value":"(CoolBeansClass"}]},{"type":"element","tag":"span","props":{"class":"ct-2914d0"},"children":[{"type":"text","value":"::"}]},{"type":"element","tag":"span","props":{"class":"ct-dfe620"},"children":[{"type":"text","value":"getBeanPositions)\n"}]}]},{"type":"element","tag":"span","props":{"class":"line","line":5},"children":[{"type":"element","tag":"span","props":{"class":"ct-dfe620"},"children":[{"type":"text","value":"    "}]},{"type":"element","tag":"span","props":{"class":"ct-8eb6ce"},"children":[{"type":"text","value":"// Up to 16 fields can be declared here\n"}]}]},{"type":"element","tag":"span","props":{"class":"line","line":6},"children":[{"type":"element","tag":"span","props":{"class":"ct-dfe620"},"children":[{"type":"text","value":")."}]},{"type":"element","tag":"span","props":{"class":"ct-0bce65"},"children":[{"type":"text","value":"apply"}]},{"type":"element","tag":"span","props":{"class":"ct-dfe620"},"children":[{"type":"text","value":"(instance, CoolBeansClass"}]},{"type":"element","tag":"span","props":{"class":"ct-2914d0"},"children":[{"type":"text","value":"::new"}]},{"type":"element","tag":"span","props":{"class":"ct-dfe620"},"children":[{"type":"text","value":"));"}]}]}]}]}]},{"type":"element","tag":"p","props":{},"children":[{"type":"text","value":"Each line in the group specifies a codec, a field name, and a getter method. The "},{"type":"element","tag":"code-inline","props":{},"children":[{"type":"text","value":"Codec#fieldOf"}]},{"type":"text","value":" call is used to convert\nthe codec into a "},{"type":"element","tag":"a","props":{"href":"#mapcodec-not-to-be-confused-with-codecltmapgt"},"children":[{"type":"text","value":"map codec"}]},{"type":"text","value":", and the "},{"type":"element","tag":"code-inline","props":{},"children":[{"type":"text","value":"forGetter"}]},{"type":"text","value":" call specifies the getter\nmethod used to retrieve the value of the field from an instance of the class. Meanwhile, the "},{"type":"element","tag":"code-inline","props":{},"children":[{"type":"text","value":"apply"}]},{"type":"text","value":" call specifies the\nconstructor used to create new instances. Note that the order of the fields in the group should be the same as the order\nof the arguments in the constructor."}]},{"type":"element","tag":"p","props":{},"children":[{"type":"text","value":"You can also use "},{"type":"element","tag":"code-inline","props":{},"children":[{"type":"text","value":"Codec#optionalFieldOf"}]},{"type":"text","value":" in this context to make a field optional, as explained in\nthe "},{"type":"element","tag":"a","props":{"href":"#optional-fields"},"children":[{"type":"text","value":"Optional Fields"}]},{"type":"text","value":" section."}]},{"type":"element","tag":"h3","props":{"id":"mapcodec-not-to-be-confused-with-codecmap"},"children":[{"type":"text","value":"MapCodec, not to be confused with Codec<Map>"}]},{"type":"element","tag":"p","props":{},"children":[{"type":"text","value":"Calling "},{"type":"element","tag":"code-inline","props":{},"children":[{"type":"text","value":"Codec#fieldOf"}]},{"type":"text","value":" will convert a "},{"type":"element","tag":"code-inline","props":{},"children":[{"type":"text","value":"Codec<T>"}]},{"type":"text","value":" into a "},{"type":"element","tag":"code-inline","props":{},"children":[{"type":"text","value":"MapCodec<T>"}]},{"type":"text","value":", which is a variant, but not direct\nimplementation of "},{"type":"element","tag":"code-inline","props":{},"children":[{"type":"text","value":"Codec<T>"}]},{"type":"text","value":". It essentially boxes the value of the source codec inside a map, with the given field name\nas the key. For example, a "},{"type":"element","tag":"code-inline","props":{},"children":[{"type":"text","value":"Codec<BlockPos>"}]},{"type":"text","value":" when serialized into json would look like this:"}]},{"type":"element","tag":"code","props":{"code":"[1, 2, 3]\n","language":"json","meta":null},"children":[{"type":"element","tag":"pre","props":{},"children":[{"type":"element","tag":"code","props":{"__ignoreMap":""},"children":[{"type":"element","tag":"span","props":{"class":"line","line":1},"children":[{"type":"element","tag":"span","props":{"class":"ct-dfe620"},"children":[{"type":"text","value":"["}]},{"type":"element","tag":"span","props":{"class":"ct-f90f27"},"children":[{"type":"text","value":"1"}]},{"type":"element","tag":"span","props":{"class":"ct-dfe620"},"children":[{"type":"text","value":", "}]},{"type":"element","tag":"span","props":{"class":"ct-f90f27"},"children":[{"type":"text","value":"2"}]},{"type":"element","tag":"span","props":{"class":"ct-dfe620"},"children":[{"type":"text","value":", "}]},{"type":"element","tag":"span","props":{"class":"ct-f90f27"},"children":[{"type":"text","value":"3"}]},{"type":"element","tag":"span","props":{"class":"ct-dfe620"},"children":[{"type":"text","value":"]"}]}]}]}]}]},{"type":"element","tag":"p","props":{},"children":[{"type":"text","value":"But when converted into a "},{"type":"element","tag":"code-inline","props":{},"children":[{"type":"text","value":"MapCodec<BlockPos>"}]},{"type":"text","value":" using "},{"type":"element","tag":"code-inline","props":{},"children":[{"type":"text","value":"BlockPos.CODEC.fieldOf(\"pos\")"}]},{"type":"text","value":", it would look like this:"}]},{"type":"element","tag":"code","props":{"code":"{\n  \"pos\": [1, 2, 3]\n}\n","language":"json","meta":null},"children":[{"type":"element","tag":"pre","props":{},"children":[{"type":"element","tag":"code","props":{"__ignoreMap":""},"children":[{"type":"element","tag":"span","props":{"class":"line","line":1},"children":[{"type":"element","tag":"span","props":{"class":"ct-dfe620"},"children":[{"type":"text","value":"{\n"}]}]},{"type":"element","tag":"span","props":{"class":"line","line":2},"children":[{"type":"element","tag":"span","props":{"class":"ct-dfe620"},"children":[{"type":"text","value":"  "}]},{"type":"element","tag":"span","props":{"class":"ct-773d84"},"children":[{"type":"text","value":"\"pos\""}]},{"type":"element","tag":"span","props":{"class":"ct-dfe620"},"children":[{"type":"text","value":": ["}]},{"type":"element","tag":"span","props":{"class":"ct-f90f27"},"children":[{"type":"text","value":"1"}]},{"type":"element","tag":"span","props":{"class":"ct-dfe620"},"children":[{"type":"text","value":", "}]},{"type":"element","tag":"span","props":{"class":"ct-f90f27"},"children":[{"type":"text","value":"2"}]},{"type":"element","tag":"span","props":{"class":"ct-dfe620"},"children":[{"type":"text","value":", "}]},{"type":"element","tag":"span","props":{"class":"ct-f90f27"},"children":[{"type":"text","value":"3"}]},{"type":"element","tag":"span","props":{"class":"ct-dfe620"},"children":[{"type":"text","value":"]\n"}]}]},{"type":"element","tag":"span","props":{"class":"line","line":3},"children":[{"type":"element","tag":"span","props":{"class":"ct-dfe620"},"children":[{"type":"text","value":"}"}]}]}]}]}]},{"type":"element","tag":"p","props":{},"children":[{"type":"text","value":"While the main use for map codecs is to be merged with other map codecs to construct a codec for a full class worth of\nfields, as explained in the "},{"type":"element","tag":"a","props":{"href":"#merging-codecs-for-record-like-classes"},"children":[{"type":"text","value":"Merging Codecs for Record-like Classes"}]},{"type":"text","value":" section\nabove, they can also be turned back into regular codecs using "},{"type":"element","tag":"code-inline","props":{},"children":[{"type":"text","value":"MapCodec#codec"}]},{"type":"text","value":", which will retain the same behavior of\nboxing their input value."}]},{"type":"element","tag":"h4","props":{"id":"optional-fields"},"children":[{"type":"text","value":"Optional Fields"}]},{"type":"element","tag":"p","props":{},"children":[{"type":"element","tag":"code-inline","props":{},"children":[{"type":"text","value":"Codec#optionalFieldOf"}]},{"type":"text","value":" can be used to create an optional map codec. This will, when the specified field is not present\nin the container during deserialization, either be deserialized as an empty "},{"type":"element","tag":"code-inline","props":{},"children":[{"type":"text","value":"Optional"}]},{"type":"text","value":" or a specified default value."}]},{"type":"element","tag":"code","props":{"code":"// Without a default value\nMapCodec<Optional<BlockPos>> optionalCodec = BlockPos.CODEC.optionalFieldOf(\"pos\");\n\n// With a default value\nMapCodec<BlockPos> optionalCodec = BlockPos.CODEC.optionalFieldOf(\"pos\", BlockPos.ORIGIN);\n","language":"java","meta":null},"children":[{"type":"element","tag":"pre","props":{},"children":[{"type":"element","tag":"code","props":{"__ignoreMap":""},"children":[{"type":"element","tag":"span","props":{"class":"line","line":1},"children":[{"type":"element","tag":"span","props":{"class":"ct-8eb6ce"},"children":[{"type":"text","value":"// Without a default value\n"}]}]},{"type":"element","tag":"span","props":{"class":"line","line":2},"children":[{"type":"element","tag":"span","props":{"class":"ct-dfe620"},"children":[{"type":"text","value":"MapCodec"}]},{"type":"element","tag":"span","props":{"class":"ct-da1098"},"children":[{"type":"text","value":"<"}]},{"type":"element","tag":"span","props":{"class":"ct-dfe620"},"children":[{"type":"text","value":"Optional"}]},{"type":"element","tag":"span","props":{"class":"ct-da1098"},"children":[{"type":"text","value":"<"}]},{"type":"element","tag":"span","props":{"class":"ct-2914d0"},"children":[{"type":"text","value":"BlockPos"}]},{"type":"element","tag":"span","props":{"class":"ct-da1098"},"children":[{"type":"text","value":">> "}]},{"type":"element","tag":"span","props":{"class":"ct-dfe620"},"children":[{"type":"text","value":"optionalCodec"}]},{"type":"element","tag":"span","props":{"class":"ct-da1098"},"children":[{"type":"text","value":" "}]},{"type":"element","tag":"span","props":{"class":"ct-2914d0"},"children":[{"type":"text","value":"="}]},{"type":"element","tag":"span","props":{"class":"ct-dfe620"},"children":[{"type":"text","value":" BlockPos.CODEC."}]},{"type":"element","tag":"span","props":{"class":"ct-0bce65"},"children":[{"type":"text","value":"optionalFieldOf"}]},{"type":"element","tag":"span","props":{"class":"ct-dfe620"},"children":[{"type":"text","value":"("}]},{"type":"element","tag":"span","props":{"class":"ct-881d91"},"children":[{"type":"text","value":"\"pos\""}]},{"type":"element","tag":"span","props":{"class":"ct-dfe620"},"children":[{"type":"text","value":");\n"}]}]},{"type":"element","tag":"span","props":{"class":"line","line":3},"children":[{"type":"element","tag":"span","props":{},"children":[{"type":"text","value":"\n"}]}]},{"type":"element","tag":"span","props":{"class":"line","line":4},"children":[{"type":"element","tag":"span","props":{"class":"ct-8eb6ce"},"children":[{"type":"text","value":"// With a default value\n"}]}]},{"type":"element","tag":"span","props":{"class":"line","line":5},"children":[{"type":"element","tag":"span","props":{"class":"ct-dfe620"},"children":[{"type":"text","value":"MapCodec"}]},{"type":"element","tag":"span","props":{"class":"ct-da1098"},"children":[{"type":"text","value":"<"}]},{"type":"element","tag":"span","props":{"class":"ct-2914d0"},"children":[{"type":"text","value":"BlockPos"}]},{"type":"element","tag":"span","props":{"class":"ct-da1098"},"children":[{"type":"text","value":"> "}]},{"type":"element","tag":"span","props":{"class":"ct-dfe620"},"children":[{"type":"text","value":"optionalCodec"}]},{"type":"element","tag":"span","props":{"class":"ct-da1098"},"children":[{"type":"text","value":" "}]},{"type":"element","tag":"span","props":{"class":"ct-2914d0"},"children":[{"type":"text","value":"="}]},{"type":"element","tag":"span","props":{"class":"ct-dfe620"},"children":[{"type":"text","value":" BlockPos.CODEC."}]},{"type":"element","tag":"span","props":{"class":"ct-0bce65"},"children":[{"type":"text","value":"optionalFieldOf"}]},{"type":"element","tag":"span","props":{"class":"ct-dfe620"},"children":[{"type":"text","value":"("}]},{"type":"element","tag":"span","props":{"class":"ct-881d91"},"children":[{"type":"text","value":"\"pos\""}]},{"type":"element","tag":"span","props":{"class":"ct-dfe620"},"children":[{"type":"text","value":", BlockPos.ORIGIN);"}]}]}]}]}]},{"type":"element","tag":"p","props":{},"children":[{"type":"text","value":"Do note that optional fields will silently ignore any errors that may occur during deserialization. This means that if\nthe field is present, but the value is invalid, the field will always be deserialized as the default value."}]},{"type":"element","tag":"h3","props":{"id":"constants-constraints-and-composition"},"children":[{"type":"text","value":"Constants, Constraints, and Composition"}]},{"type":"element","tag":"h4","props":{"id":"unit"},"children":[{"type":"text","value":"Unit"}]},{"type":"element","tag":"p","props":{},"children":[{"type":"element","tag":"code-inline","props":{},"children":[{"type":"text","value":"Codec.unit"}]},{"type":"text","value":" can be used to create a codec that always deserializes to a constant value, regardless of the input. When\nserializing, it will do nothing."}]},{"type":"element","tag":"code","props":{"code":"Codec<Integer> theMeaningOfCodec = Codec.unit(42);\n","language":"java","meta":null},"children":[{"type":"element","tag":"pre","props":{},"children":[{"type":"element","tag":"code","props":{"__ignoreMap":""},"children":[{"type":"element","tag":"span","props":{"class":"line","line":1},"children":[{"type":"element","tag":"span","props":{"class":"ct-dfe620"},"children":[{"type":"text","value":"Codec"}]},{"type":"element","tag":"span","props":{"class":"ct-da1098"},"children":[{"type":"text","value":"<"}]},{"type":"element","tag":"span","props":{"class":"ct-2914d0"},"children":[{"type":"text","value":"Integer"}]},{"type":"element","tag":"span","props":{"class":"ct-da1098"},"children":[{"type":"text","value":"> "}]},{"type":"element","tag":"span","props":{"class":"ct-dfe620"},"children":[{"type":"text","value":"theMeaningOfCodec"}]},{"type":"element","tag":"span","props":{"class":"ct-da1098"},"children":[{"type":"text","value":" "}]},{"type":"element","tag":"span","props":{"class":"ct-2914d0"},"children":[{"type":"text","value":"="}]},{"type":"element","tag":"span","props":{"class":"ct-dfe620"},"children":[{"type":"text","value":" Codec."}]},{"type":"element","tag":"span","props":{"class":"ct-0bce65"},"children":[{"type":"text","value":"unit"}]},{"type":"element","tag":"span","props":{"class":"ct-dfe620"},"children":[{"type":"text","value":"("}]},{"type":"element","tag":"span","props":{"class":"ct-f90f27"},"children":[{"type":"text","value":"42"}]},{"type":"element","tag":"span","props":{"class":"ct-dfe620"},"children":[{"type":"text","value":");"}]}]}]}]}]},{"type":"element","tag":"h4","props":{"id":"numeric-ranges"},"children":[{"type":"text","value":"Numeric Ranges"}]},{"type":"element","tag":"p","props":{},"children":[{"type":"element","tag":"code-inline","props":{},"children":[{"type":"text","value":"Codec.intRange"}]},{"type":"text","value":" and its pals, "},{"type":"element","tag":"code-inline","props":{},"children":[{"type":"text","value":"Codec.floatRange"}]},{"type":"text","value":" and "},{"type":"element","tag":"code-inline","props":{},"children":[{"type":"text","value":"Codec.doubleRange"}]},{"type":"text","value":" can be used to create a codec that only\naccepts number values within a specified "},{"type":"element","tag":"strong","props":{},"children":[{"type":"text","value":"inclusive"}]},{"type":"text","value":" range. This applies to both serialization and deserialization."}]},{"type":"element","tag":"code","props":{"code":"// Can't be more than 2\nCodec<Integer> amountOfFriendsYouHave = Codec.intRange(0, 2);\n","language":"java","meta":null},"children":[{"type":"element","tag":"pre","props":{},"children":[{"type":"element","tag":"code","props":{"__ignoreMap":""},"children":[{"type":"element","tag":"span","props":{"class":"line","line":1},"children":[{"type":"element","tag":"span","props":{"class":"ct-8eb6ce"},"children":[{"type":"text","value":"// Can't be more than 2\n"}]}]},{"type":"element","tag":"span","props":{"class":"line","line":2},"children":[{"type":"element","tag":"span","props":{"class":"ct-dfe620"},"children":[{"type":"text","value":"Codec"}]},{"type":"element","tag":"span","props":{"class":"ct-da1098"},"children":[{"type":"text","value":"<"}]},{"type":"element","tag":"span","props":{"class":"ct-2914d0"},"children":[{"type":"text","value":"Integer"}]},{"type":"element","tag":"span","props":{"class":"ct-da1098"},"children":[{"type":"text","value":"> "}]},{"type":"element","tag":"span","props":{"class":"ct-dfe620"},"children":[{"type":"text","value":"amountOfFriendsYouHave"}]},{"type":"element","tag":"span","props":{"class":"ct-da1098"},"children":[{"type":"text","value":" "}]},{"type":"element","tag":"span","props":{"class":"ct-2914d0"},"children":[{"type":"text","value":"="}]},{"type":"element","tag":"span","props":{"class":"ct-dfe620"},"children":[{"type":"text","value":" Codec."}]},{"type":"element","tag":"span","props":{"class":"ct-0bce65"},"children":[{"type":"text","value":"intRange"}]},{"type":"element","tag":"span","props":{"class":"ct-dfe620"},"children":[{"type":"text","value":"("}]},{"type":"element","tag":"span","props":{"class":"ct-f90f27"},"children":[{"type":"text","value":"0"}]},{"type":"element","tag":"span","props":{"class":"ct-dfe620"},"children":[{"type":"text","value":", "}]},{"type":"element","tag":"span","props":{"class":"ct-f90f27"},"children":[{"type":"text","value":"2"}]},{"type":"element","tag":"span","props":{"class":"ct-dfe620"},"children":[{"type":"text","value":");"}]}]}]}]}]},{"type":"element","tag":"h4","props":{"id":"pair"},"children":[{"type":"text","value":"Pair"}]},{"type":"element","tag":"p","props":{},"children":[{"type":"element","tag":"code-inline","props":{},"children":[{"type":"text","value":"Codec.pair"}]},{"type":"text","value":" merges two codecs, "},{"type":"element","tag":"code-inline","props":{},"children":[{"type":"text","value":"Codec<A>"}]},{"type":"text","value":" and "},{"type":"element","tag":"code-inline","props":{},"children":[{"type":"text","value":"Codec<B>"}]},{"type":"text","value":", into a "},{"type":"element","tag":"code-inline","props":{},"children":[{"type":"text","value":"Codec<Pair<A, B>>"}]},{"type":"text","value":". Keep in mind it only works\nproperly with codecs that serialize to a specific field, such as\n"},{"type":"element","tag":"a","props":{"href":"#mapcodec-not-to-be-confused-with-codecltmapgt"},"children":[{"type":"text","value":"converted "},{"type":"element","tag":"code-inline","props":{},"children":[{"type":"text","value":"MapCodec"}]},{"type":"text","value":"s"}]},{"type":"text","value":" or\n"},{"type":"element","tag":"a","props":{"href":"#merging-codecs-for-record-like-classes"},"children":[{"type":"text","value":"record codecs"}]},{"type":"text","value":".\nThe resulting codec will serialize to a map combining the fields of both codecs used."}]},{"type":"element","tag":"p","props":{},"children":[{"type":"text","value":"For example, running this code:"}]},{"type":"element","tag":"code","props":{"code":"// Create two seperate boxed codecs\nMapCodec<Integer> firstCodec = Codec.INT.fieldOf(\"i_am_number\").codec();\nMapCodec<Boolean> secondCodec = Codec.BOOL.fieldOf(\"this_statement_is_false\").codec();\n\n// Merge them into a pair codec\nCodec<Pair<Integer, Boolean>> pairCodec = Codec.pair(firstCodec, secondCodec);\n\n// Use it to serialize data\nDataResult<JsonElement> result = pairCodec.encodeStart(JsonOps.INSTANCE, Pair.of(23, true)).\n","language":"java","meta":null},"children":[{"type":"element","tag":"pre","props":{},"children":[{"type":"element","tag":"code","props":{"__ignoreMap":""},"children":[{"type":"element","tag":"span","props":{"class":"line","line":1},"children":[{"type":"element","tag":"span","props":{"class":"ct-8eb6ce"},"children":[{"type":"text","value":"// Create two seperate boxed codecs\n"}]}]},{"type":"element","tag":"span","props":{"class":"line","line":2},"children":[{"type":"element","tag":"span","props":{"class":"ct-dfe620"},"children":[{"type":"text","value":"MapCodec"}]},{"type":"element","tag":"span","props":{"class":"ct-da1098"},"children":[{"type":"text","value":"<"}]},{"type":"element","tag":"span","props":{"class":"ct-2914d0"},"children":[{"type":"text","value":"Integer"}]},{"type":"element","tag":"span","props":{"class":"ct-da1098"},"children":[{"type":"text","value":"> "}]},{"type":"element","tag":"span","props":{"class":"ct-dfe620"},"children":[{"type":"text","value":"firstCodec"}]},{"type":"element","tag":"span","props":{"class":"ct-da1098"},"children":[{"type":"text","value":" "}]},{"type":"element","tag":"span","props":{"class":"ct-2914d0"},"children":[{"type":"text","value":"="}]},{"type":"element","tag":"span","props":{"class":"ct-dfe620"},"children":[{"type":"text","value":" Codec.INT."}]},{"type":"element","tag":"span","props":{"class":"ct-0bce65"},"children":[{"type":"text","value":"fieldOf"}]},{"type":"element","tag":"span","props":{"class":"ct-dfe620"},"children":[{"type":"text","value":"("}]},{"type":"element","tag":"span","props":{"class":"ct-881d91"},"children":[{"type":"text","value":"\"i_am_number\""}]},{"type":"element","tag":"span","props":{"class":"ct-dfe620"},"children":[{"type":"text","value":")."}]},{"type":"element","tag":"span","props":{"class":"ct-0bce65"},"children":[{"type":"text","value":"codec"}]},{"type":"element","tag":"span","props":{"class":"ct-dfe620"},"children":[{"type":"text","value":"();\n"}]}]},{"type":"element","tag":"span","props":{"class":"line","line":3},"children":[{"type":"element","tag":"span","props":{"class":"ct-dfe620"},"children":[{"type":"text","value":"MapCodec"}]},{"type":"element","tag":"span","props":{"class":"ct-da1098"},"children":[{"type":"text","value":"<"}]},{"type":"element","tag":"span","props":{"class":"ct-2914d0"},"children":[{"type":"text","value":"Boolean"}]},{"type":"element","tag":"span","props":{"class":"ct-da1098"},"children":[{"type":"text","value":"> "}]},{"type":"element","tag":"span","props":{"class":"ct-dfe620"},"children":[{"type":"text","value":"secondCodec"}]},{"type":"element","tag":"span","props":{"class":"ct-da1098"},"children":[{"type":"text","value":" "}]},{"type":"element","tag":"span","props":{"class":"ct-2914d0"},"children":[{"type":"text","value":"="}]},{"type":"element","tag":"span","props":{"class":"ct-dfe620"},"children":[{"type":"text","value":" Codec.BOOL."}]},{"type":"element","tag":"span","props":{"class":"ct-0bce65"},"children":[{"type":"text","value":"fieldOf"}]},{"type":"element","tag":"span","props":{"class":"ct-dfe620"},"children":[{"type":"text","value":"("}]},{"type":"element","tag":"span","props":{"class":"ct-881d91"},"children":[{"type":"text","value":"\"this_statement_is_false\""}]},{"type":"element","tag":"span","props":{"class":"ct-dfe620"},"children":[{"type":"text","value":")."}]},{"type":"element","tag":"span","props":{"class":"ct-0bce65"},"children":[{"type":"text","value":"codec"}]},{"type":"element","tag":"span","props":{"class":"ct-dfe620"},"children":[{"type":"text","value":"();\n"}]}]},{"type":"element","tag":"span","props":{"class":"line","line":4},"children":[{"type":"element","tag":"span","props":{},"children":[{"type":"text","value":"\n"}]}]},{"type":"element","tag":"span","props":{"class":"line","line":5},"children":[{"type":"element","tag":"span","props":{"class":"ct-8eb6ce"},"children":[{"type":"text","value":"// Merge them into a pair codec\n"}]}]},{"type":"element","tag":"span","props":{"class":"line","line":6},"children":[{"type":"element","tag":"span","props":{"class":"ct-dfe620"},"children":[{"type":"text","value":"Codec"}]},{"type":"element","tag":"span","props":{"class":"ct-da1098"},"children":[{"type":"text","value":"<"}]},{"type":"element","tag":"span","props":{"class":"ct-dfe620"},"children":[{"type":"text","value":"Pair"}]},{"type":"element","tag":"span","props":{"class":"ct-da1098"},"children":[{"type":"text","value":"<"}]},{"type":"element","tag":"span","props":{"class":"ct-2914d0"},"children":[{"type":"text","value":"Integer"}]},{"type":"element","tag":"span","props":{"class":"ct-da1098"},"children":[{"type":"text","value":", "}]},{"type":"element","tag":"span","props":{"class":"ct-2914d0"},"children":[{"type":"text","value":"Boolean"}]},{"type":"element","tag":"span","props":{"class":"ct-da1098"},"children":[{"type":"text","value":">> "}]},{"type":"element","tag":"span","props":{"class":"ct-dfe620"},"children":[{"type":"text","value":"pairCodec"}]},{"type":"element","tag":"span","props":{"class":"ct-da1098"},"children":[{"type":"text","value":" "}]},{"type":"element","tag":"span","props":{"class":"ct-2914d0"},"children":[{"type":"text","value":"="}]},{"type":"element","tag":"span","props":{"class":"ct-dfe620"},"children":[{"type":"text","value":" Codec."}]},{"type":"element","tag":"span","props":{"class":"ct-0bce65"},"children":[{"type":"text","value":"pair"}]},{"type":"element","tag":"span","props":{"class":"ct-dfe620"},"children":[{"type":"text","value":"(firstCodec, secondCodec);\n"}]}]},{"type":"element","tag":"span","props":{"class":"line","line":7},"children":[{"type":"element","tag":"span","props":{},"children":[{"type":"text","value":"\n"}]}]},{"type":"element","tag":"span","props":{"class":"line","line":8},"children":[{"type":"element","tag":"span","props":{"class":"ct-8eb6ce"},"children":[{"type":"text","value":"// Use it to serialize data\n"}]}]},{"type":"element","tag":"span","props":{"class":"line","line":9},"children":[{"type":"element","tag":"span","props":{"class":"ct-dfe620"},"children":[{"type":"text","value":"DataResult"}]},{"type":"element","tag":"span","props":{"class":"ct-da1098"},"children":[{"type":"text","value":"<"}]},{"type":"element","tag":"span","props":{"class":"ct-2914d0"},"children":[{"type":"text","value":"JsonElement"}]},{"type":"element","tag":"span","props":{"class":"ct-da1098"},"children":[{"type":"text","value":"> "}]},{"type":"element","tag":"span","props":{"class":"ct-dfe620"},"children":[{"type":"text","value":"result"}]},{"type":"element","tag":"span","props":{"class":"ct-da1098"},"children":[{"type":"text","value":" "}]},{"type":"element","tag":"span","props":{"class":"ct-2914d0"},"children":[{"type":"text","value":"="}]},{"type":"element","tag":"span","props":{"class":"ct-dfe620"},"children":[{"type":"text","value":" pairCodec."}]},{"type":"element","tag":"span","props":{"class":"ct-0bce65"},"children":[{"type":"text","value":"encodeStart"}]},{"type":"element","tag":"span","props":{"class":"ct-dfe620"},"children":[{"type":"text","value":"(JsonOps.INSTANCE, Pair."}]},{"type":"element","tag":"span","props":{"class":"ct-0bce65"},"children":[{"type":"text","value":"of"}]},{"type":"element","tag":"span","props":{"class":"ct-dfe620"},"children":[{"type":"text","value":"("}]},{"type":"element","tag":"span","props":{"class":"ct-f90f27"},"children":[{"type":"text","value":"23"}]},{"type":"element","tag":"span","props":{"class":"ct-dfe620"},"children":[{"type":"text","value":", "}]},{"type":"element","tag":"span","props":{"class":"ct-f90f27"},"children":[{"type":"text","value":"true"}]},{"type":"element","tag":"span","props":{"class":"ct-dfe620"},"children":[{"type":"text","value":"))."}]}]}]}]}]},{"type":"element","tag":"p","props":{},"children":[{"type":"text","value":"Will output this json:"}]},{"type":"element","tag":"code","props":{"code":"{\n  \"i_am_number\": 23,\n  \"this_statement_is_false\": true\n}\n","language":"json","meta":null},"children":[{"type":"element","tag":"pre","props":{},"children":[{"type":"element","tag":"code","props":{"__ignoreMap":""},"children":[{"type":"element","tag":"span","props":{"class":"line","line":1},"children":[{"type":"element","tag":"span","props":{"class":"ct-dfe620"},"children":[{"type":"text","value":"{\n"}]}]},{"type":"element","tag":"span","props":{"class":"line","line":2},"children":[{"type":"element","tag":"span","props":{"class":"ct-dfe620"},"children":[{"type":"text","value":"  "}]},{"type":"element","tag":"span","props":{"class":"ct-773d84"},"children":[{"type":"text","value":"\"i_am_number\""}]},{"type":"element","tag":"span","props":{"class":"ct-dfe620"},"children":[{"type":"text","value":": "}]},{"type":"element","tag":"span","props":{"class":"ct-f90f27"},"children":[{"type":"text","value":"23"}]},{"type":"element","tag":"span","props":{"class":"ct-dfe620"},"children":[{"type":"text","value":",\n"}]}]},{"type":"element","tag":"span","props":{"class":"line","line":3},"children":[{"type":"element","tag":"span","props":{"class":"ct-dfe620"},"children":[{"type":"text","value":"  "}]},{"type":"element","tag":"span","props":{"class":"ct-773d84"},"children":[{"type":"text","value":"\"this_statement_is_false\""}]},{"type":"element","tag":"span","props":{"class":"ct-dfe620"},"children":[{"type":"text","value":": "}]},{"type":"element","tag":"span","props":{"class":"ct-f90f27"},"children":[{"type":"text","value":"true\n"}]}]},{"type":"element","tag":"span","props":{"class":"line","line":4},"children":[{"type":"element","tag":"span","props":{"class":"ct-dfe620"},"children":[{"type":"text","value":"}"}]}]}]}]}]},{"type":"element","tag":"h4","props":{"id":"either"},"children":[{"type":"text","value":"Either"}]},{"type":"element","tag":"p","props":{},"children":[{"type":"element","tag":"code-inline","props":{},"children":[{"type":"text","value":"Codec.either"}]},{"type":"text","value":" combines two codecs, "},{"type":"element","tag":"code-inline","props":{},"children":[{"type":"text","value":"Codec<A>"}]},{"type":"text","value":" and "},{"type":"element","tag":"code-inline","props":{},"children":[{"type":"text","value":"Codec<B>"}]},{"type":"text","value":", into a "},{"type":"element","tag":"code-inline","props":{},"children":[{"type":"text","value":"Codec<Either<A, B>>"}]},{"type":"text","value":". The resulting codec will,\nduring both "},{"type":"element","tag":"em","props":{},"children":[{"type":"text","value":"serialization and deserialization"}]},{"type":"text","value":", attempt to use the first codec, and "},{"type":"element","tag":"em","props":{},"children":[{"type":"text","value":"only if that fails"}]},{"type":"text","value":",\nattempt to use the second one. If the second one also fails, the error of the "},{"type":"element","tag":"em","props":{},"children":[{"type":"text","value":"second"}]},{"type":"text","value":" codec will be returned."}]},{"type":"element","tag":"h4","props":{"id":"maps"},"children":[{"type":"text","value":"Maps"}]},{"type":"element","tag":"p","props":{},"children":[{"type":"text","value":"For processing maps with arbitrary keys, such as "},{"type":"element","tag":"code-inline","props":{},"children":[{"type":"text","value":"HashMap"}]},{"type":"text","value":"s, "},{"type":"element","tag":"code-inline","props":{},"children":[{"type":"text","value":"Codec.unboundedMap"}]},{"type":"text","value":" can be used. This returns a\n"},{"type":"element","tag":"code-inline","props":{},"children":[{"type":"text","value":"Codec<Map<K, V>>"}]},{"type":"text","value":" for a given "},{"type":"element","tag":"code-inline","props":{},"children":[{"type":"text","value":"Codec<K>"}]},{"type":"text","value":" and "},{"type":"element","tag":"code-inline","props":{},"children":[{"type":"text","value":"Codec<V>"}]},{"type":"text","value":". The resulting codec will serialize to a json object or\nwhatever equivalent is available for the current dynamic ops."}]},{"type":"element","tag":"p","props":{},"children":[{"type":"text","value":"Due to limitations of json and nbt, the key codec used must serialize to a string. This includes codecs for types that\naren't strings themselves, but do serialize to them, such as "},{"type":"element","tag":"code-inline","props":{},"children":[{"type":"text","value":"Identifier.CODEC"}]},{"type":"text","value":". See the example below:"}]},{"type":"element","tag":"code","props":{"code":"// Create a codec for a map of identifiers to integers\nCodec<Map<Identifier, Integer>> mapCodec = Codec.unboundedMap(Identifier.CODEC, Codec.INT);\n\n// Use it to serialize data\nDataResult<JsonElement> result = mapCodec.encodeStart(JsonOps.INSTANCE, Map.of(\n    new Identifier(\"example\", \"number\"), 23,\n    new Identifier(\"example\", \"the_cooler_number\"), 42\n));\n","language":"java","meta":null},"children":[{"type":"element","tag":"pre","props":{},"children":[{"type":"element","tag":"code","props":{"__ignoreMap":""},"children":[{"type":"element","tag":"span","props":{"class":"line","line":1},"children":[{"type":"element","tag":"span","props":{"class":"ct-8eb6ce"},"children":[{"type":"text","value":"// Create a codec for a map of identifiers to integers\n"}]}]},{"type":"element","tag":"span","props":{"class":"line","line":2},"children":[{"type":"element","tag":"span","props":{"class":"ct-dfe620"},"children":[{"type":"text","value":"Codec"}]},{"type":"element","tag":"span","props":{"class":"ct-da1098"},"children":[{"type":"text","value":"<"}]},{"type":"element","tag":"span","props":{"class":"ct-dfe620"},"children":[{"type":"text","value":"Map"}]},{"type":"element","tag":"span","props":{"class":"ct-da1098"},"children":[{"type":"text","value":"<"}]},{"type":"element","tag":"span","props":{"class":"ct-2914d0"},"children":[{"type":"text","value":"Identifier"}]},{"type":"element","tag":"span","props":{"class":"ct-da1098"},"children":[{"type":"text","value":", "}]},{"type":"element","tag":"span","props":{"class":"ct-2914d0"},"children":[{"type":"text","value":"Integer"}]},{"type":"element","tag":"span","props":{"class":"ct-da1098"},"children":[{"type":"text","value":">> "}]},{"type":"element","tag":"span","props":{"class":"ct-dfe620"},"children":[{"type":"text","value":"mapCodec"}]},{"type":"element","tag":"span","props":{"class":"ct-da1098"},"children":[{"type":"text","value":" "}]},{"type":"element","tag":"span","props":{"class":"ct-2914d0"},"children":[{"type":"text","value":"="}]},{"type":"element","tag":"span","props":{"class":"ct-dfe620"},"children":[{"type":"text","value":" Codec."}]},{"type":"element","tag":"span","props":{"class":"ct-0bce65"},"children":[{"type":"text","value":"unboundedMap"}]},{"type":"element","tag":"span","props":{"class":"ct-dfe620"},"children":[{"type":"text","value":"(Identifier.CODEC, Codec.INT);\n"}]}]},{"type":"element","tag":"span","props":{"class":"line","line":3},"children":[{"type":"element","tag":"span","props":{},"children":[{"type":"text","value":"\n"}]}]},{"type":"element","tag":"span","props":{"class":"line","line":4},"children":[{"type":"element","tag":"span","props":{"class":"ct-8eb6ce"},"children":[{"type":"text","value":"// Use it to serialize data\n"}]}]},{"type":"element","tag":"span","props":{"class":"line","line":5},"children":[{"type":"element","tag":"span","props":{"class":"ct-dfe620"},"children":[{"type":"text","value":"DataResult"}]},{"type":"element","tag":"span","props":{"class":"ct-da1098"},"children":[{"type":"text","value":"<"}]},{"type":"element","tag":"span","props":{"class":"ct-2914d0"},"children":[{"type":"text","value":"JsonElement"}]},{"type":"element","tag":"span","props":{"class":"ct-da1098"},"children":[{"type":"text","value":"> "}]},{"type":"element","tag":"span","props":{"class":"ct-dfe620"},"children":[{"type":"text","value":"result"}]},{"type":"element","tag":"span","props":{"class":"ct-da1098"},"children":[{"type":"text","value":" "}]},{"type":"element","tag":"span","props":{"class":"ct-2914d0"},"children":[{"type":"text","value":"="}]},{"type":"element","tag":"span","props":{"class":"ct-dfe620"},"children":[{"type":"text","value":" mapCodec."}]},{"type":"element","tag":"span","props":{"class":"ct-0bce65"},"children":[{"type":"text","value":"encodeStart"}]},{"type":"element","tag":"span","props":{"class":"ct-dfe620"},"children":[{"type":"text","value":"(JsonOps.INSTANCE, Map."}]},{"type":"element","tag":"span","props":{"class":"ct-0bce65"},"children":[{"type":"text","value":"of"}]},{"type":"element","tag":"span","props":{"class":"ct-dfe620"},"children":[{"type":"text","value":"(\n"}]}]},{"type":"element","tag":"span","props":{"class":"line","line":6},"children":[{"type":"element","tag":"span","props":{"class":"ct-dfe620"},"children":[{"type":"text","value":"    "}]},{"type":"element","tag":"span","props":{"class":"ct-2914d0"},"children":[{"type":"text","value":"new"}]},{"type":"element","tag":"span","props":{"class":"ct-dfe620"},"children":[{"type":"text","value":" "}]},{"type":"element","tag":"span","props":{"class":"ct-0bce65"},"children":[{"type":"text","value":"Identifier"}]},{"type":"element","tag":"span","props":{"class":"ct-dfe620"},"children":[{"type":"text","value":"("}]},{"type":"element","tag":"span","props":{"class":"ct-881d91"},"children":[{"type":"text","value":"\"example\""}]},{"type":"element","tag":"span","props":{"class":"ct-dfe620"},"children":[{"type":"text","value":", "}]},{"type":"element","tag":"span","props":{"class":"ct-881d91"},"children":[{"type":"text","value":"\"number\""}]},{"type":"element","tag":"span","props":{"class":"ct-dfe620"},"children":[{"type":"text","value":"), "}]},{"type":"element","tag":"span","props":{"class":"ct-f90f27"},"children":[{"type":"text","value":"23"}]},{"type":"element","tag":"span","props":{"class":"ct-dfe620"},"children":[{"type":"text","value":",\n"}]}]},{"type":"element","tag":"span","props":{"class":"line","line":7},"children":[{"type":"element","tag":"span","props":{"class":"ct-dfe620"},"children":[{"type":"text","value":"    "}]},{"type":"element","tag":"span","props":{"class":"ct-2914d0"},"children":[{"type":"text","value":"new"}]},{"type":"element","tag":"span","props":{"class":"ct-dfe620"},"children":[{"type":"text","value":" "}]},{"type":"element","tag":"span","props":{"class":"ct-0bce65"},"children":[{"type":"text","value":"Identifier"}]},{"type":"element","tag":"span","props":{"class":"ct-dfe620"},"children":[{"type":"text","value":"("}]},{"type":"element","tag":"span","props":{"class":"ct-881d91"},"children":[{"type":"text","value":"\"example\""}]},{"type":"element","tag":"span","props":{"class":"ct-dfe620"},"children":[{"type":"text","value":", "}]},{"type":"element","tag":"span","props":{"class":"ct-881d91"},"children":[{"type":"text","value":"\"the_cooler_number\""}]},{"type":"element","tag":"span","props":{"class":"ct-dfe620"},"children":[{"type":"text","value":"), "}]},{"type":"element","tag":"span","props":{"class":"ct-f90f27"},"children":[{"type":"text","value":"42\n"}]}]},{"type":"element","tag":"span","props":{"class":"line","line":8},"children":[{"type":"element","tag":"span","props":{"class":"ct-dfe620"},"children":[{"type":"text","value":"));"}]}]}]}]}]},{"type":"element","tag":"p","props":{},"children":[{"type":"text","value":"This will output this json:"}]},{"type":"element","tag":"code","props":{"code":"{\n  \"example:number\": 23,\n  \"example:the_cooler_number\": 42\n}\n","language":"json","meta":null},"children":[{"type":"element","tag":"pre","props":{},"children":[{"type":"element","tag":"code","props":{"__ignoreMap":""},"children":[{"type":"element","tag":"span","props":{"class":"line","line":1},"children":[{"type":"element","tag":"span","props":{"class":"ct-dfe620"},"children":[{"type":"text","value":"{\n"}]}]},{"type":"element","tag":"span","props":{"class":"line","line":2},"children":[{"type":"element","tag":"span","props":{"class":"ct-dfe620"},"children":[{"type":"text","value":"  "}]},{"type":"element","tag":"span","props":{"class":"ct-773d84"},"children":[{"type":"text","value":"\"example:number\""}]},{"type":"element","tag":"span","props":{"class":"ct-dfe620"},"children":[{"type":"text","value":": "}]},{"type":"element","tag":"span","props":{"class":"ct-f90f27"},"children":[{"type":"text","value":"23"}]},{"type":"element","tag":"span","props":{"class":"ct-dfe620"},"children":[{"type":"text","value":",\n"}]}]},{"type":"element","tag":"span","props":{"class":"line","line":3},"children":[{"type":"element","tag":"span","props":{"class":"ct-dfe620"},"children":[{"type":"text","value":"  "}]},{"type":"element","tag":"span","props":{"class":"ct-773d84"},"children":[{"type":"text","value":"\"example:the_cooler_number\""}]},{"type":"element","tag":"span","props":{"class":"ct-dfe620"},"children":[{"type":"text","value":": "}]},{"type":"element","tag":"span","props":{"class":"ct-f90f27"},"children":[{"type":"text","value":"42\n"}]}]},{"type":"element","tag":"span","props":{"class":"line","line":4},"children":[{"type":"element","tag":"span","props":{"class":"ct-dfe620"},"children":[{"type":"text","value":"}"}]}]}]}]}]},{"type":"element","tag":"p","props":{},"children":[{"type":"text","value":"As you can see, this works because "},{"type":"element","tag":"code-inline","props":{},"children":[{"type":"text","value":"Identifier.CODEC"}]},{"type":"text","value":" serializes directly to a string value. A similar effect can be\nachieved for simple objects that don't serialize to strings by using "},{"type":"element","tag":"a","props":{"href":"#mutually-convertible-types-and-you"},"children":[{"type":"text","value":"xmap & friends"}]},{"type":"text","value":" to\nconvert them."}]},{"type":"element","tag":"h3","props":{"id":"mutually-convertible-types-and-you"},"children":[{"type":"text","value":"Mutually Convertible Types and You"}]},{"type":"element","tag":"h4","props":{"id":"xmap"},"children":[{"type":"text","value":"xmap"}]},{"type":"element","tag":"p","props":{},"children":[{"type":"text","value":"Say we have two classes that can be converted to each other, but don't have a parent-child relationship. For example,\na vanilla "},{"type":"element","tag":"code-inline","props":{},"children":[{"type":"text","value":"BlockPos"}]},{"type":"text","value":" and "},{"type":"element","tag":"code-inline","props":{},"children":[{"type":"text","value":"Vec3d"}]},{"type":"text","value":". If we have a codec for one, we can use "},{"type":"element","tag":"code-inline","props":{},"children":[{"type":"text","value":"Codec#xmap"}]},{"type":"text","value":" to create a codec for the other by\nspecifying a conversion function for each direction."}]},{"type":"element","tag":"p","props":{},"children":[{"type":"element","tag":"code-inline","props":{},"children":[{"type":"text","value":"BlockPos"}]},{"type":"text","value":" already has a codec, but let's pretend it doesn't. We can create one for it by basing it on the\ncodec for "},{"type":"element","tag":"code-inline","props":{},"children":[{"type":"text","value":"Vec3d"}]},{"type":"text","value":" like this:"}]},{"type":"element","tag":"code","props":{"code":"Codec<BlockPos> blockPosCodec = Vec3d.CODEC.xmap(\n    // Convert Vec3d to BlockPos\n    vec -> new BlockPos(vec.x, vec.y, vec.z),\n    // Convert BlockPos to Vec3d\n    pos -> new Vec3d(pos.getX(), pos.getY(), pos.getZ())\n);\n\n// It'd be cleaner to use method references to helper functions to transform \n// between the two, but this is just an example\n","language":"java","meta":null},"children":[{"type":"element","tag":"pre","props":{},"children":[{"type":"element","tag":"code","props":{"__ignoreMap":""},"children":[{"type":"element","tag":"span","props":{"class":"line","line":1},"children":[{"type":"element","tag":"span","props":{"class":"ct-dfe620"},"children":[{"type":"text","value":"Codec"}]},{"type":"element","tag":"span","props":{"class":"ct-da1098"},"children":[{"type":"text","value":"<"}]},{"type":"element","tag":"span","props":{"class":"ct-2914d0"},"children":[{"type":"text","value":"BlockPos"}]},{"type":"element","tag":"span","props":{"class":"ct-da1098"},"children":[{"type":"text","value":"> "}]},{"type":"element","tag":"span","props":{"class":"ct-dfe620"},"children":[{"type":"text","value":"blockPosCodec"}]},{"type":"element","tag":"span","props":{"class":"ct-da1098"},"children":[{"type":"text","value":" "}]},{"type":"element","tag":"span","props":{"class":"ct-2914d0"},"children":[{"type":"text","value":"="}]},{"type":"element","tag":"span","props":{"class":"ct-dfe620"},"children":[{"type":"text","value":" Vec3d.CODEC."}]},{"type":"element","tag":"span","props":{"class":"ct-0bce65"},"children":[{"type":"text","value":"xmap"}]},{"type":"element","tag":"span","props":{"class":"ct-dfe620"},"children":[{"type":"text","value":"(\n"}]}]},{"type":"element","tag":"span","props":{"class":"line","line":2},"children":[{"type":"element","tag":"span","props":{"class":"ct-dfe620"},"children":[{"type":"text","value":"    "}]},{"type":"element","tag":"span","props":{"class":"ct-8eb6ce"},"children":[{"type":"text","value":"// Convert Vec3d to BlockPos\n"}]}]},{"type":"element","tag":"span","props":{"class":"line","line":3},"children":[{"type":"element","tag":"span","props":{"class":"ct-dfe620"},"children":[{"type":"text","value":"    vec "}]},{"type":"element","tag":"span","props":{"class":"ct-2914d0"},"children":[{"type":"text","value":"->"}]},{"type":"element","tag":"span","props":{"class":"ct-dfe620"},"children":[{"type":"text","value":" "}]},{"type":"element","tag":"span","props":{"class":"ct-2914d0"},"children":[{"type":"text","value":"new"}]},{"type":"element","tag":"span","props":{"class":"ct-dfe620"},"children":[{"type":"text","value":" "}]},{"type":"element","tag":"span","props":{"class":"ct-0bce65"},"children":[{"type":"text","value":"BlockPos"}]},{"type":"element","tag":"span","props":{"class":"ct-dfe620"},"children":[{"type":"text","value":"(vec.x, vec.y, vec.z),\n"}]}]},{"type":"element","tag":"span","props":{"class":"line","line":4},"children":[{"type":"element","tag":"span","props":{"class":"ct-dfe620"},"children":[{"type":"text","value":"    "}]},{"type":"element","tag":"span","props":{"class":"ct-8eb6ce"},"children":[{"type":"text","value":"// Convert BlockPos to Vec3d\n"}]}]},{"type":"element","tag":"span","props":{"class":"line","line":5},"children":[{"type":"element","tag":"span","props":{"class":"ct-dfe620"},"children":[{"type":"text","value":"    pos "}]},{"type":"element","tag":"span","props":{"class":"ct-2914d0"},"children":[{"type":"text","value":"->"}]},{"type":"element","tag":"span","props":{"class":"ct-dfe620"},"children":[{"type":"text","value":" "}]},{"type":"element","tag":"span","props":{"class":"ct-2914d0"},"children":[{"type":"text","value":"new"}]},{"type":"element","tag":"span","props":{"class":"ct-dfe620"},"children":[{"type":"text","value":" "}]},{"type":"element","tag":"span","props":{"class":"ct-0bce65"},"children":[{"type":"text","value":"Vec3d"}]},{"type":"element","tag":"span","props":{"class":"ct-dfe620"},"children":[{"type":"text","value":"(pos."}]},{"type":"element","tag":"span","props":{"class":"ct-0bce65"},"children":[{"type":"text","value":"getX"}]},{"type":"element","tag":"span","props":{"class":"ct-dfe620"},"children":[{"type":"text","value":"(), pos."}]},{"type":"element","tag":"span","props":{"class":"ct-0bce65"},"children":[{"type":"text","value":"getY"}]},{"type":"element","tag":"span","props":{"class":"ct-dfe620"},"children":[{"type":"text","value":"(), pos."}]},{"type":"element","tag":"span","props":{"class":"ct-0bce65"},"children":[{"type":"text","value":"getZ"}]},{"type":"element","tag":"span","props":{"class":"ct-dfe620"},"children":[{"type":"text","value":"())\n"}]}]},{"type":"element","tag":"span","props":{"class":"line","line":6},"children":[{"type":"element","tag":"span","props":{"class":"ct-dfe620"},"children":[{"type":"text","value":");\n"}]}]},{"type":"element","tag":"span","props":{"class":"line","line":7},"children":[{"type":"element","tag":"span","props":{},"children":[{"type":"text","value":"\n"}]}]},{"type":"element","tag":"span","props":{"class":"line","line":8},"children":[{"type":"element","tag":"span","props":{"class":"ct-8eb6ce"},"children":[{"type":"text","value":"// It'd be cleaner to use method references to helper functions to transform \n"}]}]},{"type":"element","tag":"span","props":{"class":"line","line":9},"children":[{"type":"element","tag":"span","props":{"class":"ct-8eb6ce"},"children":[{"type":"text","value":"// between the two, but this is just an example"}]}]}]}]}]},{"type":"element","tag":"h4","props":{"id":"flatcomapmap-comapflatmap-and-flatxmap"},"children":[{"type":"text","value":"flatComapMap, comapFlatMap, and flatXMap"}]},{"type":"element","tag":"p","props":{},"children":[{"type":"element","tag":"code-inline","props":{},"children":[{"type":"text","value":"Codec#flatComapMap"}]},{"type":"text","value":", "},{"type":"element","tag":"code-inline","props":{},"children":[{"type":"text","value":"Codec#comapFlatMap"}]},{"type":"text","value":" and "},{"type":"element","tag":"code-inline","props":{},"children":[{"type":"text","value":"flatXMap"}]},{"type":"text","value":" are similar to xmap, but they allow one or both of the\nconversion functions to return a DataResult. This is useful in practice because a specific object instance may not\nalways be valid for conversion."}]},{"type":"element","tag":"p","props":{},"children":[{"type":"text","value":"Take for example vanilla "},{"type":"element","tag":"code-inline","props":{},"children":[{"type":"text","value":"Identifier"}]},{"type":"text","value":"s. Not all strings are valid identifiers, so using xmap would mean throwing ugly\nexceptions when the conversion fails. However, its codec is actually a "},{"type":"element","tag":"code-inline","props":{},"children":[{"type":"text","value":"comapFlatMap"}]},{"type":"text","value":" on "},{"type":"element","tag":"code-inline","props":{},"children":[{"type":"text","value":"Codec.STRING"}]},{"type":"text","value":", nicely\nillustrating how to use it:"}]},{"type":"element","tag":"code","props":{"code":"public class Identifier {\n    public static final Codec<Identifier> CODEC = Codec.STRING.comapFlatMap(\n        Identifier::validate, Identifier::toString\n    );\n\n    // ...\n\n    public static DataResult<Identifier> validate(String id) {\n        try {\n            return DataResult.success(new Identifier(id));\n        } catch (InvalidIdentifierException e) {\n            return DataResult.error(\"Not a valid resource location: \" + id + \" \" + e.getMessage());\n        }\n    }\n    \n    // ...\n}\n","language":"java","meta":null},"children":[{"type":"element","tag":"pre","props":{},"children":[{"type":"element","tag":"code","props":{"__ignoreMap":""},"children":[{"type":"element","tag":"span","props":{"class":"line","line":1},"children":[{"type":"element","tag":"span","props":{"class":"ct-2914d0"},"children":[{"type":"text","value":"public"}]},{"type":"element","tag":"span","props":{"class":"ct-dfe620"},"children":[{"type":"text","value":" "}]},{"type":"element","tag":"span","props":{"class":"ct-2914d0"},"children":[{"type":"text","value":"class"}]},{"type":"element","tag":"span","props":{"class":"ct-dfe620"},"children":[{"type":"text","value":" "}]},{"type":"element","tag":"span","props":{"class":"ct-da1098"},"children":[{"type":"text","value":"Identifier"}]},{"type":"element","tag":"span","props":{"class":"ct-dfe620"},"children":[{"type":"text","value":" {\n"}]}]},{"type":"element","tag":"span","props":{"class":"line","line":2},"children":[{"type":"element","tag":"span","props":{"class":"ct-dfe620"},"children":[{"type":"text","value":"    "}]},{"type":"element","tag":"span","props":{"class":"ct-2914d0"},"children":[{"type":"text","value":"public"}]},{"type":"element","tag":"span","props":{"class":"ct-dfe620"},"children":[{"type":"text","value":" "}]},{"type":"element","tag":"span","props":{"class":"ct-2914d0"},"children":[{"type":"text","value":"static"}]},{"type":"element","tag":"span","props":{"class":"ct-dfe620"},"children":[{"type":"text","value":" "}]},{"type":"element","tag":"span","props":{"class":"ct-2914d0"},"children":[{"type":"text","value":"final"}]},{"type":"element","tag":"span","props":{"class":"ct-dfe620"},"children":[{"type":"text","value":" Codec"}]},{"type":"element","tag":"span","props":{"class":"ct-da1098"},"children":[{"type":"text","value":"<"}]},{"type":"element","tag":"span","props":{"class":"ct-2914d0"},"children":[{"type":"text","value":"Identifier"}]},{"type":"element","tag":"span","props":{"class":"ct-da1098"},"children":[{"type":"text","value":"> "}]},{"type":"element","tag":"span","props":{"class":"ct-dfe620"},"children":[{"type":"text","value":"CODEC"}]},{"type":"element","tag":"span","props":{"class":"ct-da1098"},"children":[{"type":"text","value":" "}]},{"type":"element","tag":"span","props":{"class":"ct-2914d0"},"children":[{"type":"text","value":"="}]},{"type":"element","tag":"span","props":{"class":"ct-dfe620"},"children":[{"type":"text","value":" Codec.STRING."}]},{"type":"element","tag":"span","props":{"class":"ct-0bce65"},"children":[{"type":"text","value":"comapFlatMap"}]},{"type":"element","tag":"span","props":{"class":"ct-dfe620"},"children":[{"type":"text","value":"(\n"}]}]},{"type":"element","tag":"span","props":{"class":"line","line":3},"children":[{"type":"element","tag":"span","props":{"class":"ct-dfe620"},"children":[{"type":"text","value":"        Identifier"}]},{"type":"element","tag":"span","props":{"class":"ct-2914d0"},"children":[{"type":"text","value":"::"}]},{"type":"element","tag":"span","props":{"class":"ct-dfe620"},"children":[{"type":"text","value":"validate, Identifier"}]},{"type":"element","tag":"span","props":{"class":"ct-2914d0"},"children":[{"type":"text","value":"::"}]},{"type":"element","tag":"span","props":{"class":"ct-dfe620"},"children":[{"type":"text","value":"toString\n"}]}]},{"type":"element","tag":"span","props":{"class":"line","line":4},"children":[{"type":"element","tag":"span","props":{"class":"ct-dfe620"},"children":[{"type":"text","value":"    );\n"}]}]},{"type":"element","tag":"span","props":{"class":"line","line":5},"children":[{"type":"element","tag":"span","props":{},"children":[{"type":"text","value":"\n"}]}]},{"type":"element","tag":"span","props":{"class":"line","line":6},"children":[{"type":"element","tag":"span","props":{"class":"ct-dfe620"},"children":[{"type":"text","value":"    "}]},{"type":"element","tag":"span","props":{"class":"ct-8eb6ce"},"children":[{"type":"text","value":"// ...\n"}]}]},{"type":"element","tag":"span","props":{"class":"line","line":7},"children":[{"type":"element","tag":"span","props":{},"children":[{"type":"text","value":"\n"}]}]},{"type":"element","tag":"span","props":{"class":"line","line":8},"children":[{"type":"element","tag":"span","props":{"class":"ct-dfe620"},"children":[{"type":"text","value":"    "}]},{"type":"element","tag":"span","props":{"class":"ct-2914d0"},"children":[{"type":"text","value":"public"}]},{"type":"element","tag":"span","props":{"class":"ct-dfe620"},"children":[{"type":"text","value":" "}]},{"type":"element","tag":"span","props":{"class":"ct-2914d0"},"children":[{"type":"text","value":"static"}]},{"type":"element","tag":"span","props":{"class":"ct-dfe620"},"children":[{"type":"text","value":" DataResult<"}]},{"type":"element","tag":"span","props":{"class":"ct-2914d0"},"children":[{"type":"text","value":"Identifier"}]},{"type":"element","tag":"span","props":{"class":"ct-dfe620"},"children":[{"type":"text","value":"> "}]},{"type":"element","tag":"span","props":{"class":"ct-0bce65"},"children":[{"type":"text","value":"validate"}]},{"type":"element","tag":"span","props":{"class":"ct-dfe620"},"children":[{"type":"text","value":"(String "}]},{"type":"element","tag":"span","props":{"class":"ct-da1098"},"children":[{"type":"text","value":"id"}]},{"type":"element","tag":"span","props":{"class":"ct-dfe620"},"children":[{"type":"text","value":") {\n"}]}]},{"type":"element","tag":"span","props":{"class":"line","line":9},"children":[{"type":"element","tag":"span","props":{"class":"ct-dfe620"},"children":[{"type":"text","value":"        "}]},{"type":"element","tag":"span","props":{"class":"ct-2914d0"},"children":[{"type":"text","value":"try"}]},{"type":"element","tag":"span","props":{"class":"ct-dfe620"},"children":[{"type":"text","value":" {\n"}]}]},{"type":"element","tag":"span","props":{"class":"line","line":10},"children":[{"type":"element","tag":"span","props":{"class":"ct-dfe620"},"children":[{"type":"text","value":"            "}]},{"type":"element","tag":"span","props":{"class":"ct-2914d0"},"children":[{"type":"text","value":"return"}]},{"type":"element","tag":"span","props":{"class":"ct-dfe620"},"children":[{"type":"text","value":" DataResult."}]},{"type":"element","tag":"span","props":{"class":"ct-0bce65"},"children":[{"type":"text","value":"success"}]},{"type":"element","tag":"span","props":{"class":"ct-dfe620"},"children":[{"type":"text","value":"("}]},{"type":"element","tag":"span","props":{"class":"ct-2914d0"},"children":[{"type":"text","value":"new"}]},{"type":"element","tag":"span","props":{"class":"ct-dfe620"},"children":[{"type":"text","value":" "}]},{"type":"element","tag":"span","props":{"class":"ct-0bce65"},"children":[{"type":"text","value":"Identifier"}]},{"type":"element","tag":"span","props":{"class":"ct-dfe620"},"children":[{"type":"text","value":"(id));\n"}]}]},{"type":"element","tag":"span","props":{"class":"line","line":11},"children":[{"type":"element","tag":"span","props":{"class":"ct-dfe620"},"children":[{"type":"text","value":"        } "}]},{"type":"element","tag":"span","props":{"class":"ct-2914d0"},"children":[{"type":"text","value":"catch"}]},{"type":"element","tag":"span","props":{"class":"ct-dfe620"},"children":[{"type":"text","value":" (InvalidIdentifierException "}]},{"type":"element","tag":"span","props":{"class":"ct-da1098"},"children":[{"type":"text","value":"e"}]},{"type":"element","tag":"span","props":{"class":"ct-dfe620"},"children":[{"type":"text","value":") {\n"}]}]},{"type":"element","tag":"span","props":{"class":"line","line":12},"children":[{"type":"element","tag":"span","props":{"class":"ct-dfe620"},"children":[{"type":"text","value":"            "}]},{"type":"element","tag":"span","props":{"class":"ct-2914d0"},"children":[{"type":"text","value":"return"}]},{"type":"element","tag":"span","props":{"class":"ct-dfe620"},"children":[{"type":"text","value":" DataResult."}]},{"type":"element","tag":"span","props":{"class":"ct-0bce65"},"children":[{"type":"text","value":"error"}]},{"type":"element","tag":"span","props":{"class":"ct-dfe620"},"children":[{"type":"text","value":"("}]},{"type":"element","tag":"span","props":{"class":"ct-881d91"},"children":[{"type":"text","value":"\"Not a valid resource location: \""}]},{"type":"element","tag":"span","props":{"class":"ct-dfe620"},"children":[{"type":"text","value":" "}]},{"type":"element","tag":"span","props":{"class":"ct-2914d0"},"children":[{"type":"text","value":"+"}]},{"type":"element","tag":"span","props":{"class":"ct-dfe620"},"children":[{"type":"text","value":" id "}]},{"type":"element","tag":"span","props":{"class":"ct-2914d0"},"children":[{"type":"text","value":"+"}]},{"type":"element","tag":"span","props":{"class":"ct-dfe620"},"children":[{"type":"text","value":" "}]},{"type":"element","tag":"span","props":{"class":"ct-881d91"},"children":[{"type":"text","value":"\" \""}]},{"type":"element","tag":"span","props":{"class":"ct-dfe620"},"children":[{"type":"text","value":" "}]},{"type":"element","tag":"span","props":{"class":"ct-2914d0"},"children":[{"type":"text","value":"+"}]},{"type":"element","tag":"span","props":{"class":"ct-dfe620"},"children":[{"type":"text","value":" e."}]},{"type":"element","tag":"span","props":{"class":"ct-0bce65"},"children":[{"type":"text","value":"getMessage"}]},{"type":"element","tag":"span","props":{"class":"ct-dfe620"},"children":[{"type":"text","value":"());\n"}]}]},{"type":"element","tag":"span","props":{"class":"line","line":13},"children":[{"type":"element","tag":"span","props":{"class":"ct-dfe620"},"children":[{"type":"text","value":"        }\n"}]}]},{"type":"element","tag":"span","props":{"class":"line","line":14},"children":[{"type":"element","tag":"span","props":{"class":"ct-dfe620"},"children":[{"type":"text","value":"    }\n"}]}]},{"type":"element","tag":"span","props":{"class":"line","line":15},"children":[{"type":"element","tag":"span","props":{"class":"ct-dfe620"},"children":[{"type":"text","value":"    \n"}]}]},{"type":"element","tag":"span","props":{"class":"line","line":16},"children":[{"type":"element","tag":"span","props":{"class":"ct-dfe620"},"children":[{"type":"text","value":"    "}]},{"type":"element","tag":"span","props":{"class":"ct-8eb6ce"},"children":[{"type":"text","value":"// ...\n"}]}]},{"type":"element","tag":"span","props":{"class":"line","line":17},"children":[{"type":"element","tag":"span","props":{"class":"ct-dfe620"},"children":[{"type":"text","value":"}"}]}]}]}]}]},{"type":"element","tag":"p","props":{},"children":[{"type":"text","value":"While these methods are really helpful, their names are a bit confusing, so here's a table to help you remember which\none to use:"}]},{"type":"element","tag":"table","props":{},"children":[{"type":"element","tag":"thead","props":{},"children":[{"type":"element","tag":"tr","props":{},"children":[{"type":"element","tag":"th","props":{"align":null},"children":[{"type":"text","value":"Method"}]},{"type":"element","tag":"th","props":{"align":null},"children":[{"type":"text","value":"A -> B always valid?"}]},{"type":"element","tag":"th","props":{"align":null},"children":[{"type":"text","value":"B -> A always valid?"}]}]}]},{"type":"element","tag":"tbody","props":{},"children":[{"type":"element","tag":"tr","props":{},"children":[{"type":"element","tag":"td","props":{"align":null},"children":[{"type":"element","tag":"code-inline","props":{},"children":[{"type":"text","value":"Codec<A>#xmap"}]}]},{"type":"element","tag":"td","props":{"align":null},"children":[{"type":"text","value":"Yes"}]},{"type":"element","tag":"td","props":{"align":null},"children":[{"type":"text","value":"Yes"}]}]},{"type":"element","tag":"tr","props":{},"children":[{"type":"element","tag":"td","props":{"align":null},"children":[{"type":"element","tag":"code-inline","props":{},"children":[{"type":"text","value":"Codec<A>#comapFlatMap"}]}]},{"type":"element","tag":"td","props":{"align":null},"children":[{"type":"text","value":"No"}]},{"type":"element","tag":"td","props":{"align":null},"children":[{"type":"text","value":"Yes"}]}]},{"type":"element","tag":"tr","props":{},"children":[{"type":"element","tag":"td","props":{"align":null},"children":[{"type":"element","tag":"code-inline","props":{},"children":[{"type":"text","value":"Codec<A>#flatComapMap"}]}]},{"type":"element","tag":"td","props":{"align":null},"children":[{"type":"text","value":"Yes"}]},{"type":"element","tag":"td","props":{"align":null},"children":[{"type":"text","value":"No"}]}]},{"type":"element","tag":"tr","props":{},"children":[{"type":"element","tag":"td","props":{"align":null},"children":[{"type":"element","tag":"code-inline","props":{},"children":[{"type":"text","value":"Codec<A>#flatXMap"}]}]},{"type":"element","tag":"td","props":{"align":null},"children":[{"type":"text","value":"No"}]},{"type":"element","tag":"td","props":{"align":null},"children":[{"type":"text","value":"No"}]}]}]}]},{"type":"element","tag":"h3","props":{"id":"registry-dispatch"},"children":[{"type":"text","value":"Registry Dispatch"}]},{"type":"element","tag":"p","props":{},"children":[{"type":"element","tag":"code-inline","props":{},"children":[{"type":"text","value":"Codec#dispatch"}]},{"type":"text","value":" let us define a registry of codecs and dispatch to a specific one based on the value of a\nfield in the serialized data. This is very useful when deserializing objects that have different fields depending on\ntheir type, but still represent the same thing."}]},{"type":"element","tag":"p","props":{},"children":[{"type":"text","value":"For example, say we have an abstract "},{"type":"element","tag":"code-inline","props":{},"children":[{"type":"text","value":"Bean"}]},{"type":"text","value":" class with two subclasses: "},{"type":"element","tag":"code-inline","props":{},"children":[{"type":"text","value":"StringyBean"}]},{"type":"text","value":" and "},{"type":"element","tag":"code-inline","props":{},"children":[{"type":"text","value":"CountingBean"}]},{"type":"text","value":". To serialize\nthese with a registry dispatch, we'll need a few things:"}]},{"type":"element","tag":"ul","props":{},"children":[{"type":"element","tag":"li","props":{},"children":[{"type":"text","value":"Separate codecs for every type of bean."}]},{"type":"element","tag":"li","props":{},"children":[{"type":"text","value":"A "},{"type":"element","tag":"code-inline","props":{},"children":[{"type":"text","value":"BeanType"}]},{"type":"text","value":" interface or class that represents the type of bean, and can return the codec for it."}]},{"type":"element","tag":"li","props":{},"children":[{"type":"text","value":"A function on "},{"type":"element","tag":"code-inline","props":{},"children":[{"type":"text","value":"Bean"}]},{"type":"text","value":" to retrieve its "},{"type":"element","tag":"code-inline","props":{},"children":[{"type":"text","value":"BeanType"}]},{"type":"text","value":"."}]},{"type":"element","tag":"li","props":{},"children":[{"type":"text","value":"A map or registry to map "},{"type":"element","tag":"code-inline","props":{},"children":[{"type":"text","value":"Identifier"}]},{"type":"text","value":"s to "},{"type":"element","tag":"code-inline","props":{},"children":[{"type":"text","value":"BeanType"}]},{"type":"text","value":"s."}]},{"type":"element","tag":"li","props":{},"children":[{"type":"text","value":"A "},{"type":"element","tag":"code-inline","props":{},"children":[{"type":"text","value":"Codec<BeanType>"}]},{"type":"text","value":" based on this registry. If you used a "},{"type":"element","tag":"code-inline","props":{},"children":[{"type":"text","value":"net.minecraft.registry.Registry"}]},{"type":"text","value":", one can be easily made\nusing "},{"type":"element","tag":"code-inline","props":{},"children":[{"type":"text","value":"Registry#getCodec"}]},{"type":"text","value":"."}]}]},{"type":"element","tag":"p","props":{},"children":[{"type":"text","value":"With all of this, we can create a registry dispatch codec for beans:"}]},{"type":"element","tag":"code","props":{"code":"class Bean {\n    // ...\n    public BeanType getType() {\n        // ...\n    }\n}\n\nclass BeanType {\n    // ...\n    \n    public Codec<? extends Bean> getCodec();\n}\n\nclass StringyBean extends Bean {\n    public static final Codec<StringyBean> CODEC = RecordCodecBuilder.create(instance -> instance.group(\n        Codec.STRING.fieldOf(\"stringy_string\").forGetter(StringyBean::getStringyString)\n    ).apply(instance, StringyBean::new));\n\n    public final String stringyString;\n\n    // ...\n}\n\nclass CountingBean extends Bean {\n    public static final Codec<CountingBean> CODEC = RecordCodecBuilder.create(instance -> instance.group(\n        Codec.INT.fieldOf(\"counting_number\").forGetter(CountingBean::getCountingNumber)\n    ).apply(instance, CountingBean::new));\n\n    public final int countingNumber;\n\n    // ...\n}\n\n// Create a registry to map identifiers to bean types\nRegistry<BeanType> beanTypeRegistry = new SimpleRegistry<>(new Identifier(\"example\", \"bean_types\"), Lifecycle.stable());\n\n// Register the bean types\nbeanTypeRegistry.register(new Identifier(\"example\", \"stringy_bean\"), new BeanType(StringyBean.CODEC));\nbeanTypeRegistry.register(new Identifier(\"example\", \"counting_bean\"), new BeanType(CountingBean.CODEC));\n\n// Create a codec for bean types\nCodec<BeanType> beanTypeCodec = beanTypeRegistry.getCodec();\n\n// And here's our registry dispatch codec for beans! \n// The first argument is the field name for the bean type\nCodec<Bean> beanCodec = beanTypeCodec.dispatch(\"type\", Bean::getType, BeanType::getCodec);\n","language":"java","meta":null},"children":[{"type":"element","tag":"pre","props":{},"children":[{"type":"element","tag":"code","props":{"__ignoreMap":""},"children":[{"type":"element","tag":"span","props":{"class":"line","line":1},"children":[{"type":"element","tag":"span","props":{"class":"ct-2914d0"},"children":[{"type":"text","value":"class"}]},{"type":"element","tag":"span","props":{"class":"ct-dfe620"},"children":[{"type":"text","value":" "}]},{"type":"element","tag":"span","props":{"class":"ct-da1098"},"children":[{"type":"text","value":"Bean"}]},{"type":"element","tag":"span","props":{"class":"ct-dfe620"},"children":[{"type":"text","value":" {\n"}]}]},{"type":"element","tag":"span","props":{"class":"line","line":2},"children":[{"type":"element","tag":"span","props":{"class":"ct-dfe620"},"children":[{"type":"text","value":"    "}]},{"type":"element","tag":"span","props":{"class":"ct-8eb6ce"},"children":[{"type":"text","value":"// ...\n"}]}]},{"type":"element","tag":"span","props":{"class":"line","line":3},"children":[{"type":"element","tag":"span","props":{"class":"ct-dfe620"},"children":[{"type":"text","value":"    "}]},{"type":"element","tag":"span","props":{"class":"ct-2914d0"},"children":[{"type":"text","value":"public"}]},{"type":"element","tag":"span","props":{"class":"ct-dfe620"},"children":[{"type":"text","value":" BeanType "}]},{"type":"element","tag":"span","props":{"class":"ct-0bce65"},"children":[{"type":"text","value":"getType"}]},{"type":"element","tag":"span","props":{"class":"ct-dfe620"},"children":[{"type":"text","value":"() {\n"}]}]},{"type":"element","tag":"span","props":{"class":"line","line":4},"children":[{"type":"element","tag":"span","props":{"class":"ct-dfe620"},"children":[{"type":"text","value":"        "}]},{"type":"element","tag":"span","props":{"class":"ct-8eb6ce"},"children":[{"type":"text","value":"// ...\n"}]}]},{"type":"element","tag":"span","props":{"class":"line","line":5},"children":[{"type":"element","tag":"span","props":{"class":"ct-dfe620"},"children":[{"type":"text","value":"    }\n"}]}]},{"type":"element","tag":"span","props":{"class":"line","line":6},"children":[{"type":"element","tag":"span","props":{"class":"ct-dfe620"},"children":[{"type":"text","value":"}\n"}]}]},{"type":"element","tag":"span","props":{"class":"line","line":7},"children":[{"type":"element","tag":"span","props":{},"children":[{"type":"text","value":"\n"}]}]},{"type":"element","tag":"span","props":{"class":"line","line":8},"children":[{"type":"element","tag":"span","props":{"class":"ct-2914d0"},"children":[{"type":"text","value":"class"}]},{"type":"element","tag":"span","props":{"class":"ct-dfe620"},"children":[{"type":"text","value":" "}]},{"type":"element","tag":"span","props":{"class":"ct-da1098"},"children":[{"type":"text","value":"BeanType"}]},{"type":"element","tag":"span","props":{"class":"ct-dfe620"},"children":[{"type":"text","value":" {\n"}]}]},{"type":"element","tag":"span","props":{"class":"line","line":9},"children":[{"type":"element","tag":"span","props":{"class":"ct-dfe620"},"children":[{"type":"text","value":"    "}]},{"type":"element","tag":"span","props":{"class":"ct-8eb6ce"},"children":[{"type":"text","value":"// ...\n"}]}]},{"type":"element","tag":"span","props":{"class":"line","line":10},"children":[{"type":"element","tag":"span","props":{"class":"ct-dfe620"},"children":[{"type":"text","value":"    \n"}]}]},{"type":"element","tag":"span","props":{"class":"line","line":11},"children":[{"type":"element","tag":"span","props":{"class":"ct-dfe620"},"children":[{"type":"text","value":"    "}]},{"type":"element","tag":"span","props":{"class":"ct-2914d0"},"children":[{"type":"text","value":"public"}]},{"type":"element","tag":"span","props":{"class":"ct-dfe620"},"children":[{"type":"text","value":" Codec<"}]},{"type":"element","tag":"span","props":{"class":"ct-2914d0"},"children":[{"type":"text","value":"?"}]},{"type":"element","tag":"span","props":{"class":"ct-dfe620"},"children":[{"type":"text","value":" "}]},{"type":"element","tag":"span","props":{"class":"ct-2914d0"},"children":[{"type":"text","value":"extends"}]},{"type":"element","tag":"span","props":{"class":"ct-dfe620"},"children":[{"type":"text","value":" "}]},{"type":"element","tag":"span","props":{"class":"ct-2914d0"},"children":[{"type":"text","value":"Bean"}]},{"type":"element","tag":"span","props":{"class":"ct-dfe620"},"children":[{"type":"text","value":"> "}]},{"type":"element","tag":"span","props":{"class":"ct-0bce65"},"children":[{"type":"text","value":"getCodec"}]},{"type":"element","tag":"span","props":{"class":"ct-dfe620"},"children":[{"type":"text","value":"();\n"}]}]},{"type":"element","tag":"span","props":{"class":"line","line":12},"children":[{"type":"element","tag":"span","props":{"class":"ct-dfe620"},"children":[{"type":"text","value":"}\n"}]}]},{"type":"element","tag":"span","props":{"class":"line","line":13},"children":[{"type":"element","tag":"span","props":{},"children":[{"type":"text","value":"\n"}]}]},{"type":"element","tag":"span","props":{"class":"line","line":14},"children":[{"type":"element","tag":"span","props":{"class":"ct-2914d0"},"children":[{"type":"text","value":"class"}]},{"type":"element","tag":"span","props":{"class":"ct-dfe620"},"children":[{"type":"text","value":" "}]},{"type":"element","tag":"span","props":{"class":"ct-da1098"},"children":[{"type":"text","value":"StringyBean"}]},{"type":"element","tag":"span","props":{"class":"ct-dfe620"},"children":[{"type":"text","value":" "}]},{"type":"element","tag":"span","props":{"class":"ct-2914d0"},"children":[{"type":"text","value":"extends"}]},{"type":"element","tag":"span","props":{"class":"ct-dfe620"},"children":[{"type":"text","value":" "}]},{"type":"element","tag":"span","props":{"class":"ct-f90f27"},"children":[{"type":"text","value":"Bean"}]},{"type":"element","tag":"span","props":{"class":"ct-dfe620"},"children":[{"type":"text","value":" {\n"}]}]},{"type":"element","tag":"span","props":{"class":"line","line":15},"children":[{"type":"element","tag":"span","props":{"class":"ct-dfe620"},"children":[{"type":"text","value":"    "}]},{"type":"element","tag":"span","props":{"class":"ct-2914d0"},"children":[{"type":"text","value":"public"}]},{"type":"element","tag":"span","props":{"class":"ct-dfe620"},"children":[{"type":"text","value":" "}]},{"type":"element","tag":"span","props":{"class":"ct-2914d0"},"children":[{"type":"text","value":"static"}]},{"type":"element","tag":"span","props":{"class":"ct-dfe620"},"children":[{"type":"text","value":" "}]},{"type":"element","tag":"span","props":{"class":"ct-2914d0"},"children":[{"type":"text","value":"final"}]},{"type":"element","tag":"span","props":{"class":"ct-dfe620"},"children":[{"type":"text","value":" Codec"}]},{"type":"element","tag":"span","props":{"class":"ct-da1098"},"children":[{"type":"text","value":"<"}]},{"type":"element","tag":"span","props":{"class":"ct-2914d0"},"children":[{"type":"text","value":"StringyBean"}]},{"type":"element","tag":"span","props":{"class":"ct-da1098"},"children":[{"type":"text","value":"> "}]},{"type":"element","tag":"span","props":{"class":"ct-dfe620"},"children":[{"type":"text","value":"CODEC"}]},{"type":"element","tag":"span","props":{"class":"ct-da1098"},"children":[{"type":"text","value":" "}]},{"type":"element","tag":"span","props":{"class":"ct-2914d0"},"children":[{"type":"text","value":"="}]},{"type":"element","tag":"span","props":{"class":"ct-dfe620"},"children":[{"type":"text","value":" RecordCodecBuilder."}]},{"type":"element","tag":"span","props":{"class":"ct-0bce65"},"children":[{"type":"text","value":"create"}]},{"type":"element","tag":"span","props":{"class":"ct-dfe620"},"children":[{"type":"text","value":"(instance "}]},{"type":"element","tag":"span","props":{"class":"ct-2914d0"},"children":[{"type":"text","value":"->"}]},{"type":"element","tag":"span","props":{"class":"ct-dfe620"},"children":[{"type":"text","value":" instance."}]},{"type":"element","tag":"span","props":{"class":"ct-0bce65"},"children":[{"type":"text","value":"group"}]},{"type":"element","tag":"span","props":{"class":"ct-dfe620"},"children":[{"type":"text","value":"(\n"}]}]},{"type":"element","tag":"span","props":{"class":"line","line":16},"children":[{"type":"element","tag":"span","props":{"class":"ct-dfe620"},"children":[{"type":"text","value":"        Codec.STRING."}]},{"type":"element","tag":"span","props":{"class":"ct-0bce65"},"children":[{"type":"text","value":"fieldOf"}]},{"type":"element","tag":"span","props":{"class":"ct-dfe620"},"children":[{"type":"text","value":"("}]},{"type":"element","tag":"span","props":{"class":"ct-881d91"},"children":[{"type":"text","value":"\"stringy_string\""}]},{"type":"element","tag":"span","props":{"class":"ct-dfe620"},"children":[{"type":"text","value":")."}]},{"type":"element","tag":"span","props":{"class":"ct-0bce65"},"children":[{"type":"text","value":"forGetter"}]},{"type":"element","tag":"span","props":{"class":"ct-dfe620"},"children":[{"type":"text","value":"(StringyBean"}]},{"type":"element","tag":"span","props":{"class":"ct-2914d0"},"children":[{"type":"text","value":"::"}]},{"type":"element","tag":"span","props":{"class":"ct-dfe620"},"children":[{"type":"text","value":"getStringyString)\n"}]}]},{"type":"element","tag":"span","props":{"class":"line","line":17},"children":[{"type":"element","tag":"span","props":{"class":"ct-dfe620"},"children":[{"type":"text","value":"    )."}]},{"type":"element","tag":"span","props":{"class":"ct-0bce65"},"children":[{"type":"text","value":"apply"}]},{"type":"element","tag":"span","props":{"class":"ct-dfe620"},"children":[{"type":"text","value":"(instance, StringyBean"}]},{"type":"element","tag":"span","props":{"class":"ct-2914d0"},"children":[{"type":"text","value":"::new"}]},{"type":"element","tag":"span","props":{"class":"ct-dfe620"},"children":[{"type":"text","value":"));\n"}]}]},{"type":"element","tag":"span","props":{"class":"line","line":18},"children":[{"type":"element","tag":"span","props":{},"children":[{"type":"text","value":"\n"}]}]},{"type":"element","tag":"span","props":{"class":"line","line":19},"children":[{"type":"element","tag":"span","props":{"class":"ct-dfe620"},"children":[{"type":"text","value":"    "}]},{"type":"element","tag":"span","props":{"class":"ct-2914d0"},"children":[{"type":"text","value":"public"}]},{"type":"element","tag":"span","props":{"class":"ct-dfe620"},"children":[{"type":"text","value":" "}]},{"type":"element","tag":"span","props":{"class":"ct-2914d0"},"children":[{"type":"text","value":"final"}]},{"type":"element","tag":"span","props":{"class":"ct-dfe620"},"children":[{"type":"text","value":" String"}]},{"type":"element","tag":"span","props":{"class":"ct-da1098"},"children":[{"type":"text","value":" "}]},{"type":"element","tag":"span","props":{"class":"ct-dfe620"},"children":[{"type":"text","value":"stringyString;\n"}]}]},{"type":"element","tag":"span","props":{"class":"line","line":20},"children":[{"type":"element","tag":"span","props":{},"children":[{"type":"text","value":"\n"}]}]},{"type":"element","tag":"span","props":{"class":"line","line":21},"children":[{"type":"element","tag":"span","props":{"class":"ct-dfe620"},"children":[{"type":"text","value":"    "}]},{"type":"element","tag":"span","props":{"class":"ct-8eb6ce"},"children":[{"type":"text","value":"// ...\n"}]}]},{"type":"element","tag":"span","props":{"class":"line","line":22},"children":[{"type":"element","tag":"span","props":{"class":"ct-dfe620"},"children":[{"type":"text","value":"}\n"}]}]},{"type":"element","tag":"span","props":{"class":"line","line":23},"children":[{"type":"element","tag":"span","props":{},"children":[{"type":"text","value":"\n"}]}]},{"type":"element","tag":"span","props":{"class":"line","line":24},"children":[{"type":"element","tag":"span","props":{"class":"ct-2914d0"},"children":[{"type":"text","value":"class"}]},{"type":"element","tag":"span","props":{"class":"ct-dfe620"},"children":[{"type":"text","value":" "}]},{"type":"element","tag":"span","props":{"class":"ct-da1098"},"children":[{"type":"text","value":"CountingBean"}]},{"type":"element","tag":"span","props":{"class":"ct-dfe620"},"children":[{"type":"text","value":" "}]},{"type":"element","tag":"span","props":{"class":"ct-2914d0"},"children":[{"type":"text","value":"extends"}]},{"type":"element","tag":"span","props":{"class":"ct-dfe620"},"children":[{"type":"text","value":" "}]},{"type":"element","tag":"span","props":{"class":"ct-f90f27"},"children":[{"type":"text","value":"Bean"}]},{"type":"element","tag":"span","props":{"class":"ct-dfe620"},"children":[{"type":"text","value":" {\n"}]}]},{"type":"element","tag":"span","props":{"class":"line","line":25},"children":[{"type":"element","tag":"span","props":{"class":"ct-dfe620"},"children":[{"type":"text","value":"    "}]},{"type":"element","tag":"span","props":{"class":"ct-2914d0"},"children":[{"type":"text","value":"public"}]},{"type":"element","tag":"span","props":{"class":"ct-dfe620"},"children":[{"type":"text","value":" "}]},{"type":"element","tag":"span","props":{"class":"ct-2914d0"},"children":[{"type":"text","value":"static"}]},{"type":"element","tag":"span","props":{"class":"ct-dfe620"},"children":[{"type":"text","value":" "}]},{"type":"element","tag":"span","props":{"class":"ct-2914d0"},"children":[{"type":"text","value":"final"}]},{"type":"element","tag":"span","props":{"class":"ct-dfe620"},"children":[{"type":"text","value":" Codec"}]},{"type":"element","tag":"span","props":{"class":"ct-da1098"},"children":[{"type":"text","value":"<"}]},{"type":"element","tag":"span","props":{"class":"ct-2914d0"},"children":[{"type":"text","value":"CountingBean"}]},{"type":"element","tag":"span","props":{"class":"ct-da1098"},"children":[{"type":"text","value":"> "}]},{"type":"element","tag":"span","props":{"class":"ct-dfe620"},"children":[{"type":"text","value":"CODEC"}]},{"type":"element","tag":"span","props":{"class":"ct-da1098"},"children":[{"type":"text","value":" "}]},{"type":"element","tag":"span","props":{"class":"ct-2914d0"},"children":[{"type":"text","value":"="}]},{"type":"element","tag":"span","props":{"class":"ct-dfe620"},"children":[{"type":"text","value":" RecordCodecBuilder."}]},{"type":"element","tag":"span","props":{"class":"ct-0bce65"},"children":[{"type":"text","value":"create"}]},{"type":"element","tag":"span","props":{"class":"ct-dfe620"},"children":[{"type":"text","value":"(instance "}]},{"type":"element","tag":"span","props":{"class":"ct-2914d0"},"children":[{"type":"text","value":"->"}]},{"type":"element","tag":"span","props":{"class":"ct-dfe620"},"children":[{"type":"text","value":" instance."}]},{"type":"element","tag":"span","props":{"class":"ct-0bce65"},"children":[{"type":"text","value":"group"}]},{"type":"element","tag":"span","props":{"class":"ct-dfe620"},"children":[{"type":"text","value":"(\n"}]}]},{"type":"element","tag":"span","props":{"class":"line","line":26},"children":[{"type":"element","tag":"span","props":{"class":"ct-dfe620"},"children":[{"type":"text","value":"        Codec.INT."}]},{"type":"element","tag":"span","props":{"class":"ct-0bce65"},"children":[{"type":"text","value":"fieldOf"}]},{"type":"element","tag":"span","props":{"class":"ct-dfe620"},"children":[{"type":"text","value":"("}]},{"type":"element","tag":"span","props":{"class":"ct-881d91"},"children":[{"type":"text","value":"\"counting_number\""}]},{"type":"element","tag":"span","props":{"class":"ct-dfe620"},"children":[{"type":"text","value":")."}]},{"type":"element","tag":"span","props":{"class":"ct-0bce65"},"children":[{"type":"text","value":"forGetter"}]},{"type":"element","tag":"span","props":{"class":"ct-dfe620"},"children":[{"type":"text","value":"(CountingBean"}]},{"type":"element","tag":"span","props":{"class":"ct-2914d0"},"children":[{"type":"text","value":"::"}]},{"type":"element","tag":"span","props":{"class":"ct-dfe620"},"children":[{"type":"text","value":"getCountingNumber)\n"}]}]},{"type":"element","tag":"span","props":{"class":"line","line":27},"children":[{"type":"element","tag":"span","props":{"class":"ct-dfe620"},"children":[{"type":"text","value":"    )."}]},{"type":"element","tag":"span","props":{"class":"ct-0bce65"},"children":[{"type":"text","value":"apply"}]},{"type":"element","tag":"span","props":{"class":"ct-dfe620"},"children":[{"type":"text","value":"(instance, CountingBean"}]},{"type":"element","tag":"span","props":{"class":"ct-2914d0"},"children":[{"type":"text","value":"::new"}]},{"type":"element","tag":"span","props":{"class":"ct-dfe620"},"children":[{"type":"text","value":"));\n"}]}]},{"type":"element","tag":"span","props":{"class":"line","line":28},"children":[{"type":"element","tag":"span","props":{},"children":[{"type":"text","value":"\n"}]}]},{"type":"element","tag":"span","props":{"class":"line","line":29},"children":[{"type":"element","tag":"span","props":{"class":"ct-dfe620"},"children":[{"type":"text","value":"    "}]},{"type":"element","tag":"span","props":{"class":"ct-2914d0"},"children":[{"type":"text","value":"public"}]},{"type":"element","tag":"span","props":{"class":"ct-dfe620"},"children":[{"type":"text","value":" "}]},{"type":"element","tag":"span","props":{"class":"ct-2914d0"},"children":[{"type":"text","value":"final"}]},{"type":"element","tag":"span","props":{"class":"ct-dfe620"},"children":[{"type":"text","value":" "}]},{"type":"element","tag":"span","props":{"class":"ct-2914d0"},"children":[{"type":"text","value":"int"}]},{"type":"element","tag":"span","props":{"class":"ct-da1098"},"children":[{"type":"text","value":" "}]},{"type":"element","tag":"span","props":{"class":"ct-dfe620"},"children":[{"type":"text","value":"countingNumber;\n"}]}]},{"type":"element","tag":"span","props":{"class":"line","line":30},"children":[{"type":"element","tag":"span","props":{},"children":[{"type":"text","value":"\n"}]}]},{"type":"element","tag":"span","props":{"class":"line","line":31},"children":[{"type":"element","tag":"span","props":{"class":"ct-dfe620"},"children":[{"type":"text","value":"    "}]},{"type":"element","tag":"span","props":{"class":"ct-8eb6ce"},"children":[{"type":"text","value":"// ...\n"}]}]},{"type":"element","tag":"span","props":{"class":"line","line":32},"children":[{"type":"element","tag":"span","props":{"class":"ct-dfe620"},"children":[{"type":"text","value":"}\n"}]}]},{"type":"element","tag":"span","props":{"class":"line","line":33},"children":[{"type":"element","tag":"span","props":{},"children":[{"type":"text","value":"\n"}]}]},{"type":"element","tag":"span","props":{"class":"line","line":34},"children":[{"type":"element","tag":"span","props":{"class":"ct-8eb6ce"},"children":[{"type":"text","value":"// Create a registry to map identifiers to bean types\n"}]}]},{"type":"element","tag":"span","props":{"class":"line","line":35},"children":[{"type":"element","tag":"span","props":{"class":"ct-dfe620"},"children":[{"type":"text","value":"Registry"}]},{"type":"element","tag":"span","props":{"class":"ct-da1098"},"children":[{"type":"text","value":"<"}]},{"type":"element","tag":"span","props":{"class":"ct-2914d0"},"children":[{"type":"text","value":"BeanType"}]},{"type":"element","tag":"span","props":{"class":"ct-da1098"},"children":[{"type":"text","value":"> "}]},{"type":"element","tag":"span","props":{"class":"ct-dfe620"},"children":[{"type":"text","value":"beanTypeRegistry"}]},{"type":"element","tag":"span","props":{"class":"ct-da1098"},"children":[{"type":"text","value":" "}]},{"type":"element","tag":"span","props":{"class":"ct-2914d0"},"children":[{"type":"text","value":"="}]},{"type":"element","tag":"span","props":{"class":"ct-dfe620"},"children":[{"type":"text","value":" "}]},{"type":"element","tag":"span","props":{"class":"ct-2914d0"},"children":[{"type":"text","value":"new"}]},{"type":"element","tag":"span","props":{"class":"ct-dfe620"},"children":[{"type":"text","value":" SimpleRegistry<>("}]},{"type":"element","tag":"span","props":{"class":"ct-2914d0"},"children":[{"type":"text","value":"new"}]},{"type":"element","tag":"span","props":{"class":"ct-dfe620"},"children":[{"type":"text","value":" "}]},{"type":"element","tag":"span","props":{"class":"ct-0bce65"},"children":[{"type":"text","value":"Identifier"}]},{"type":"element","tag":"span","props":{"class":"ct-dfe620"},"children":[{"type":"text","value":"("}]},{"type":"element","tag":"span","props":{"class":"ct-881d91"},"children":[{"type":"text","value":"\"example\""}]},{"type":"element","tag":"span","props":{"class":"ct-dfe620"},"children":[{"type":"text","value":", "}]},{"type":"element","tag":"span","props":{"class":"ct-881d91"},"children":[{"type":"text","value":"\"bean_types\""}]},{"type":"element","tag":"span","props":{"class":"ct-dfe620"},"children":[{"type":"text","value":"), Lifecycle."}]},{"type":"element","tag":"span","props":{"class":"ct-0bce65"},"children":[{"type":"text","value":"stable"}]},{"type":"element","tag":"span","props":{"class":"ct-dfe620"},"children":[{"type":"text","value":"());\n"}]}]},{"type":"element","tag":"span","props":{"class":"line","line":36},"children":[{"type":"element","tag":"span","props":{},"children":[{"type":"text","value":"\n"}]}]},{"type":"element","tag":"span","props":{"class":"line","line":37},"children":[{"type":"element","tag":"span","props":{"class":"ct-8eb6ce"},"children":[{"type":"text","value":"// Register the bean types\n"}]}]},{"type":"element","tag":"span","props":{"class":"line","line":38},"children":[{"type":"element","tag":"span","props":{"class":"ct-dfe620"},"children":[{"type":"text","value":"beanTypeRegistry."}]},{"type":"element","tag":"span","props":{"class":"ct-0bce65"},"children":[{"type":"text","value":"register"}]},{"type":"element","tag":"span","props":{"class":"ct-dfe620"},"children":[{"type":"text","value":"("}]},{"type":"element","tag":"span","props":{"class":"ct-2914d0"},"children":[{"type":"text","value":"new"}]},{"type":"element","tag":"span","props":{"class":"ct-dfe620"},"children":[{"type":"text","value":" "}]},{"type":"element","tag":"span","props":{"class":"ct-0bce65"},"children":[{"type":"text","value":"Identifier"}]},{"type":"element","tag":"span","props":{"class":"ct-dfe620"},"children":[{"type":"text","value":"("}]},{"type":"element","tag":"span","props":{"class":"ct-881d91"},"children":[{"type":"text","value":"\"example\""}]},{"type":"element","tag":"span","props":{"class":"ct-dfe620"},"children":[{"type":"text","value":", "}]},{"type":"element","tag":"span","props":{"class":"ct-881d91"},"children":[{"type":"text","value":"\"stringy_bean\""}]},{"type":"element","tag":"span","props":{"class":"ct-dfe620"},"children":[{"type":"text","value":"), "}]},{"type":"element","tag":"span","props":{"class":"ct-2914d0"},"children":[{"type":"text","value":"new"}]},{"type":"element","tag":"span","props":{"class":"ct-dfe620"},"children":[{"type":"text","value":" "}]},{"type":"element","tag":"span","props":{"class":"ct-0bce65"},"children":[{"type":"text","value":"BeanType"}]},{"type":"element","tag":"span","props":{"class":"ct-dfe620"},"children":[{"type":"text","value":"(StringyBean.CODEC));\n"}]}]},{"type":"element","tag":"span","props":{"class":"line","line":39},"children":[{"type":"element","tag":"span","props":{"class":"ct-dfe620"},"children":[{"type":"text","value":"beanTypeRegistry."}]},{"type":"element","tag":"span","props":{"class":"ct-0bce65"},"children":[{"type":"text","value":"register"}]},{"type":"element","tag":"span","props":{"class":"ct-dfe620"},"children":[{"type":"text","value":"("}]},{"type":"element","tag":"span","props":{"class":"ct-2914d0"},"children":[{"type":"text","value":"new"}]},{"type":"element","tag":"span","props":{"class":"ct-dfe620"},"children":[{"type":"text","value":" "}]},{"type":"element","tag":"span","props":{"class":"ct-0bce65"},"children":[{"type":"text","value":"Identifier"}]},{"type":"element","tag":"span","props":{"class":"ct-dfe620"},"children":[{"type":"text","value":"("}]},{"type":"element","tag":"span","props":{"class":"ct-881d91"},"children":[{"type":"text","value":"\"example\""}]},{"type":"element","tag":"span","props":{"class":"ct-dfe620"},"children":[{"type":"text","value":", "}]},{"type":"element","tag":"span","props":{"class":"ct-881d91"},"children":[{"type":"text","value":"\"counting_bean\""}]},{"type":"element","tag":"span","props":{"class":"ct-dfe620"},"children":[{"type":"text","value":"), "}]},{"type":"element","tag":"span","props":{"class":"ct-2914d0"},"children":[{"type":"text","value":"new"}]},{"type":"element","tag":"span","props":{"class":"ct-dfe620"},"children":[{"type":"text","value":" "}]},{"type":"element","tag":"span","props":{"class":"ct-0bce65"},"children":[{"type":"text","value":"BeanType"}]},{"type":"element","tag":"span","props":{"class":"ct-dfe620"},"children":[{"type":"text","value":"(CountingBean.CODEC));\n"}]}]},{"type":"element","tag":"span","props":{"class":"line","line":40},"children":[{"type":"element","tag":"span","props":{},"children":[{"type":"text","value":"\n"}]}]},{"type":"element","tag":"span","props":{"class":"line","line":41},"children":[{"type":"element","tag":"span","props":{"class":"ct-8eb6ce"},"children":[{"type":"text","value":"// Create a codec for bean types\n"}]}]},{"type":"element","tag":"span","props":{"class":"line","line":42},"children":[{"type":"element","tag":"span","props":{"class":"ct-dfe620"},"children":[{"type":"text","value":"Codec"}]},{"type":"element","tag":"span","props":{"class":"ct-da1098"},"children":[{"type":"text","value":"<"}]},{"type":"element","tag":"span","props":{"class":"ct-2914d0"},"children":[{"type":"text","value":"BeanType"}]},{"type":"element","tag":"span","props":{"class":"ct-da1098"},"children":[{"type":"text","value":"> "}]},{"type":"element","tag":"span","props":{"class":"ct-dfe620"},"children":[{"type":"text","value":"beanTypeCodec"}]},{"type":"element","tag":"span","props":{"class":"ct-da1098"},"children":[{"type":"text","value":" "}]},{"type":"element","tag":"span","props":{"class":"ct-2914d0"},"children":[{"type":"text","value":"="}]},{"type":"element","tag":"span","props":{"class":"ct-dfe620"},"children":[{"type":"text","value":" beanTypeRegistry."}]},{"type":"element","tag":"span","props":{"class":"ct-0bce65"},"children":[{"type":"text","value":"getCodec"}]},{"type":"element","tag":"span","props":{"class":"ct-dfe620"},"children":[{"type":"text","value":"();\n"}]}]},{"type":"element","tag":"span","props":{"class":"line","line":43},"children":[{"type":"element","tag":"span","props":{},"children":[{"type":"text","value":"\n"}]}]},{"type":"element","tag":"span","props":{"class":"line","line":44},"children":[{"type":"element","tag":"span","props":{"class":"ct-8eb6ce"},"children":[{"type":"text","value":"// And here's our registry dispatch codec for beans! \n"}]}]},{"type":"element","tag":"span","props":{"class":"line","line":45},"children":[{"type":"element","tag":"span","props":{"class":"ct-8eb6ce"},"children":[{"type":"text","value":"// The first argument is the field name for the bean type\n"}]}]},{"type":"element","tag":"span","props":{"class":"line","line":46},"children":[{"type":"element","tag":"span","props":{"class":"ct-dfe620"},"children":[{"type":"text","value":"Codec"}]},{"type":"element","tag":"span","props":{"class":"ct-da1098"},"children":[{"type":"text","value":"<"}]},{"type":"element","tag":"span","props":{"class":"ct-2914d0"},"children":[{"type":"text","value":"Bean"}]},{"type":"element","tag":"span","props":{"class":"ct-da1098"},"children":[{"type":"text","value":"> "}]},{"type":"element","tag":"span","props":{"class":"ct-dfe620"},"children":[{"type":"text","value":"beanCodec"}]},{"type":"element","tag":"span","props":{"class":"ct-da1098"},"children":[{"type":"text","value":" "}]},{"type":"element","tag":"span","props":{"class":"ct-2914d0"},"children":[{"type":"text","value":"="}]},{"type":"element","tag":"span","props":{"class":"ct-dfe620"},"children":[{"type":"text","value":" beanTypeCodec."}]},{"type":"element","tag":"span","props":{"class":"ct-0bce65"},"children":[{"type":"text","value":"dispatch"}]},{"type":"element","tag":"span","props":{"class":"ct-dfe620"},"children":[{"type":"text","value":"("}]},{"type":"element","tag":"span","props":{"class":"ct-881d91"},"children":[{"type":"text","value":"\"type\""}]},{"type":"element","tag":"span","props":{"class":"ct-dfe620"},"children":[{"type":"text","value":", Bean"}]},{"type":"element","tag":"span","props":{"class":"ct-2914d0"},"children":[{"type":"text","value":"::"}]},{"type":"element","tag":"span","props":{"class":"ct-dfe620"},"children":[{"type":"text","value":"getType, BeanType"}]},{"type":"element","tag":"span","props":{"class":"ct-2914d0"},"children":[{"type":"text","value":"::"}]},{"type":"element","tag":"span","props":{"class":"ct-dfe620"},"children":[{"type":"text","value":"getCodec);"}]}]}]}]}]},{"type":"element","tag":"p","props":{},"children":[{"type":"text","value":"This will serialize beans to json like this, grabbing only fields that are relevant to its type:"}]},{"type":"element","tag":"code","props":{"code":"{\n  \"type\": \"example:stringy_bean\",\n  \"stringy_string\": \"This bean is stringy!\"\n}\n","language":"json","meta":null},"children":[{"type":"element","tag":"pre","props":{},"children":[{"type":"element","tag":"code","props":{"__ignoreMap":""},"children":[{"type":"element","tag":"span","props":{"class":"line","line":1},"children":[{"type":"element","tag":"span","props":{"class":"ct-dfe620"},"children":[{"type":"text","value":"{\n"}]}]},{"type":"element","tag":"span","props":{"class":"line","line":2},"children":[{"type":"element","tag":"span","props":{"class":"ct-dfe620"},"children":[{"type":"text","value":"  "}]},{"type":"element","tag":"span","props":{"class":"ct-773d84"},"children":[{"type":"text","value":"\"type\""}]},{"type":"element","tag":"span","props":{"class":"ct-dfe620"},"children":[{"type":"text","value":": "}]},{"type":"element","tag":"span","props":{"class":"ct-881d91"},"children":[{"type":"text","value":"\"example:stringy_bean\""}]},{"type":"element","tag":"span","props":{"class":"ct-dfe620"},"children":[{"type":"text","value":",\n"}]}]},{"type":"element","tag":"span","props":{"class":"line","line":3},"children":[{"type":"element","tag":"span","props":{"class":"ct-dfe620"},"children":[{"type":"text","value":"  "}]},{"type":"element","tag":"span","props":{"class":"ct-773d84"},"children":[{"type":"text","value":"\"stringy_string\""}]},{"type":"element","tag":"span","props":{"class":"ct-dfe620"},"children":[{"type":"text","value":": "}]},{"type":"element","tag":"span","props":{"class":"ct-881d91"},"children":[{"type":"text","value":"\"This bean is stringy!\"\n"}]}]},{"type":"element","tag":"span","props":{"class":"line","line":4},"children":[{"type":"element","tag":"span","props":{"class":"ct-dfe620"},"children":[{"type":"text","value":"}"}]}]}]}]}]},{"type":"element","tag":"code","props":{"code":"{\n  \"type\": \"example:counting_bean\",\n  \"counting_number\": 42\n}\n","language":"json","meta":null},"children":[{"type":"element","tag":"pre","props":{},"children":[{"type":"element","tag":"code","props":{"__ignoreMap":""},"children":[{"type":"element","tag":"span","props":{"class":"line","line":1},"children":[{"type":"element","tag":"span","props":{"class":"ct-dfe620"},"children":[{"type":"text","value":"{\n"}]}]},{"type":"element","tag":"span","props":{"class":"line","line":2},"children":[{"type":"element","tag":"span","props":{"class":"ct-dfe620"},"children":[{"type":"text","value":"  "}]},{"type":"element","tag":"span","props":{"class":"ct-773d84"},"children":[{"type":"text","value":"\"type\""}]},{"type":"element","tag":"span","props":{"class":"ct-dfe620"},"children":[{"type":"text","value":": "}]},{"type":"element","tag":"span","props":{"class":"ct-881d91"},"children":[{"type":"text","value":"\"example:counting_bean\""}]},{"type":"element","tag":"span","props":{"class":"ct-dfe620"},"children":[{"type":"text","value":",\n"}]}]},{"type":"element","tag":"span","props":{"class":"line","line":3},"children":[{"type":"element","tag":"span","props":{"class":"ct-dfe620"},"children":[{"type":"text","value":"  "}]},{"type":"element","tag":"span","props":{"class":"ct-773d84"},"children":[{"type":"text","value":"\"counting_number\""}]},{"type":"element","tag":"span","props":{"class":"ct-dfe620"},"children":[{"type":"text","value":": "}]},{"type":"element","tag":"span","props":{"class":"ct-f90f27"},"children":[{"type":"text","value":"42\n"}]}]},{"type":"element","tag":"span","props":{"class":"line","line":4},"children":[{"type":"element","tag":"span","props":{"class":"ct-dfe620"},"children":[{"type":"text","value":"}"}]}]}]}]}]},{"type":"element","tag":"h2","props":{"id":"references"},"children":[{"type":"text","value":"References"}]},{"type":"element","tag":"ul","props":{},"children":[{"type":"element","tag":"li","props":{},"children":[{"type":"text","value":"A much more comprehensive documentation of codecs and related APIs can be found at the\n"},{"type":"element","tag":"a","props":{"href":"https://kvverti.github.io/Documented-DataFixerUpper/snapshot/com/mojang/serialization/Codec.html","rel":["nofollow"]},"children":[{"type":"text","value":"Unofficial DFU JavaDoc"}]},{"type":"text","value":"."}]},{"type":"element","tag":"li","props":{},"children":[{"type":"text","value":"The general structure of this guide was heavily inspired by the\n"},{"type":"element","tag":"a","props":{"href":"https://forge.gemwire.uk/wiki/Codecs","rel":["nofollow"]},"children":[{"type":"text","value":"Forge Community Wiki's page on codecs"}]},{"type":"text","value":", a more Forge-specific take on the same\ntopic."}]}]},{"type":"element","tag":"style","children":[{"type":"text","value":".ct-773d84{color:#116329}\n.ct-881d91{color:#0A3069}\n.ct-8eb6ce{color:#6E7781}\n.ct-f90f27{color:#0550AE}\n.ct-0bce65{color:#8250DF}\n.ct-2914d0{color:#CF222E}\n.ct-da1098{color:#953800}\n.ct-dfe620{color:#24292F}\n.dark .ct-dfe620{color:#C9D1D9}\n.dark .ct-da1098{color:#FFA657}\n.dark .ct-2914d0{color:#FF7B72}\n.dark .ct-0bce65{color:#D2A8FF}\n.dark .ct-f90f27{color:#79C0FF}\n.dark .ct-8eb6ce{color:#8B949E}\n.dark .ct-881d91{color:#A5D6FF}\n.dark .ct-773d84{color:#7EE787}"}]}],"toc":{"title":"","searchDepth":2,"depth":2,"links":[{"id":"using-codecs","depth":2,"text":"Using Codecs","children":[{"id":"serializing-and-deserializing","depth":3,"text":"Serializing and Deserializing"},{"id":"built-in-codecs","depth":3,"text":"Built-in Codecs"}]},{"id":"building-codecs","depth":2,"text":"Building Codecs","children":[{"id":"lists","depth":3,"text":"Lists"},{"id":"merging-codecs-for-record-like-classes","depth":3,"text":"Merging Codecs for Record-like Classes"},{"id":"mapcodec-not-to-be-confused-with-codecmap","depth":3,"text":"MapCodec, not to be confused with Codec<Map>"},{"id":"constants-constraints-and-composition","depth":3,"text":"Constants, Constraints, and Composition"},{"id":"mutually-convertible-types-and-you","depth":3,"text":"Mutually Convertible Types and You"},{"id":"registry-dispatch","depth":3,"text":"Registry Dispatch"}]},{"id":"references","depth":2,"text":"References"}]}},"_type":"markdown","_id":"content:9.misc:codecs.md","_source":"content","_file":"9.misc/codecs.md","_extension":"md"}